<!DOCTYPE html>
<html lang="">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">



  <meta name="description" content="phpç¯å¢ƒå®‰è£…ç¬”è®° (Nginx/php7+/php-fpm/mariadb)"/>




  <meta name="keywords" content="ğŸ­ xcliâ€™s Blog" />










  <link rel="alternate" href="/default" title="cotideâ€™s Blog">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.9.0" />



<link rel="canonical" href="https://cotide.github.io/2018/09/03/php/PHP-ç¯å¢ƒæ­å»º/"/>



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" />




  <link rel="stylesheet" type="text/css" href="/lib/nprogress/nprogress.min.css" />



<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.9.0" />



  



  <script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>








<script>
  window.config = {"title":"cotideâ€™s Blog","subtitle":null,"description":"â˜€ï¸äººç”Ÿå¦‚ç”»ï¼Œå²æœˆå¦‚æ­ŒğŸ»ğŸŒğŸğŸğŸŠ","author":"cotide","language":null,"timezone":null,"url":"https://cotide.github.io","root":"/","permalink":":year/:month/:day/:title/","permalink_defaults":null,"source_dir":"source","public_dir":"public","tag_dir":"tags","archive_dir":"archives","category_dir":"categories","code_dir":"downloads/code","i18n_dir":":lang","skip_render":null,"new_post_name":":title.md","default_layout":"post","titlecase":false,"external_link":true,"filename_case":0,"render_drafts":false,"post_asset_folder":false,"relative_link":false,"future":true,"highlight":{"enable":true,"auto_detect":false,"line_number":true,"tab_replace":null},"default_category":"uncategorized","category_map":null,"tag_map":null,"date_format":"YYYY-MM-DD","time_format":"HH:mm:ss","per_page":10,"pagination_dir":"page","theme":"even","deploy":{"type":null},"ignore":[],"keywords":"ğŸ­ xcliâ€™s Blog","index_generator":{"per_page":10,"order_by":"-date","path":""},"category_generator":{"per_page":10},"tag_generator":{"per_page":10},"archive_generator":{"per_page":10,"yearly":true,"monthly":true,"daily":false},"marked":{"gfm":true,"pedantic":false,"sanitize":false,"tables":true,"breaks":true,"smartLists":true,"smartypants":true,"modifyAnchors":"","autolink":true},"server":{"port":4000,"log":false,"compress":false,"header":true},"since":2015,"favicon":"/favicon.ico","rss":"default","menu":{"Home":"/","Archives":"/archives/","Tags":"/tags","About":"https://about.me/xcli"},"color":"Default","toc":true,"fancybox":true,"pjax":true,"copyright":{"enable":true,"license":"<a rel=\"license\" href=\"http://creativecommons.org/licenses/by-nc/4.0/\" target=\"_blank\">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 4.0 å›½é™…è®¸å¯åè®®</a>"},"reward":{"enable":false,"qrCode":{"wechat":null,"alipay":null}},"social":{"email":"xli.code@gmail.com","stack-overflow":null,"twitter":"https://twitter.com/xiaochaoli","facebook":null,"linkedin":null,"google":null,"github":"https://github.com/cotide","weibo":null,"zhihu":null,"douban":null,"pocket":null,"tumblr":null,"instagram":null},"leancloud":"app_id:iLauMtmkcbk2wqR6LwO1nCqC-gzGzoHsz app_key:JosstohXgGKf2m8484aH1Ebq","baidu_analytics":null,"baidu_verification":null,"google_analytics":null,"google_verification":null,"disqus_shortname":null,"changyan":{"appid":null,"appkey":null},"livere_datauid":null,"version":"2.9.0"};
</script>

    <title> PHP-ç¯å¢ƒæ­å»º - cotideâ€™s Blog </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">cotideâ€™s Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            é¦–é¡µ
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            å½’æ¡£
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            æ ‡ç­¾
          
        </li>
      </a>
    
      <a href="https://about.me/xcli">
        <li class="mobile-menu-item">
          
          
            å…³äº
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">cotideâ€™s Blog</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              é¦–é¡µ
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              å½’æ¡£
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              æ ‡ç­¾
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="https://about.me/xcli">
            
            
              å…³äº
            
          </a>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          PHP-ç¯å¢ƒæ­å»º
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-09-03
        </span>
        
          <div class="post-category">
            
              <a href="/categories/php/">php</a>
            
          </div>
        
        
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">æ–‡ç« ç›®å½•</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ç¯å¢ƒ"><span class="toc-text">ç¯å¢ƒ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç³»ç»Ÿå®‰è£…"><span class="toc-text">ç³»ç»Ÿå®‰è£…</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Nginx-å®‰è£…"><span class="toc-text">Nginx å®‰è£…</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å®‰è£…"><span class="toc-text">å®‰è£…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Nginx-ç®¡ç†è„šæœ¬"><span class="toc-text">Nginx ç®¡ç†è„šæœ¬</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æˆæƒäºä½¿ç”¨"><span class="toc-text">æˆæƒäºä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ä½¿ç”¨chkconfigè¿›è¡Œç®¡ç†"><span class="toc-text">ä½¿ç”¨chkconfigè¿›è¡Œç®¡ç†</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PHP-FPM-æ¨¡å—"><span class="toc-text">PHP-FPM æ¨¡å—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PHPæ‰©å±•"><span class="toc-text">PHPæ‰©å±•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ç»„ä»¶å®‰è£…"><span class="toc-text">ç»„ä»¶å®‰è£…</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PHP-å¸¸ç”¨å‘½ä»¤"><span class="toc-text">PHP å¸¸ç”¨å‘½ä»¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#åˆ é™¤PHP"><span class="toc-text">åˆ é™¤PHP</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ•°æ®åº“æ­å»º"><span class="toc-text">æ•°æ®åº“æ­å»º</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MariaDB-10-2-13"><span class="toc-text">MariaDB 10.2.13</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#å®‰è£…-1"><span class="toc-text">å®‰è£…</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MariaDBç®¡ç†å‘½ä»¤"><span class="toc-text">MariaDBç®¡ç†å‘½ä»¤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#åˆå§‹åŒ–"><span class="toc-text">åˆå§‹åŒ–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å…è®¸è¿œç¨‹è¿æ¥"><span class="toc-text">å…è®¸è¿œç¨‹è¿æ¥</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ä¿®æ”¹rootå¯†ç "><span class="toc-text">ä¿®æ”¹rootå¯†ç </span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ•°æ®åº“å¸è½½"><span class="toc-text">æ•°æ®åº“å¸è½½</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Redis-å®‰è£…"><span class="toc-text">Redis å®‰è£…</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#é˜²ç«å¢™"><span class="toc-text">é˜²ç«å¢™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#é—®é¢˜"><span class="toc-text">é—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ç³»ç»Ÿå®‰è£…-1"><span class="toc-text">ç³»ç»Ÿå®‰è£…</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#CentOS-7-minimal-ç‰ˆæœ¬å®‰è£…åç½‘ç»œé…ç½®"><span class="toc-text">CentOS 7 minimal ç‰ˆæœ¬å®‰è£…åç½‘ç»œé…ç½®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ifconfig-command-not-found"><span class="toc-text">ifconfig: command not found</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Nginx-å®‰è£…-1"><span class="toc-text">Nginx å®‰è£…</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#æ‰§è¡Œ-configure-æ—¶å€™å‡ºé”™-1"><span class="toc-text">æ‰§è¡Œ  ./configure æ—¶å€™å‡ºé”™ 1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æ‰§è¡Œ-configure-æ—¶å€™å‡ºé”™-2"><span class="toc-text">æ‰§è¡Œ  ./configure æ—¶å€™å‡ºé”™ 2</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å®‰è£…Nginx-åŠ è½½æ’ä»¶"><span class="toc-text">å®‰è£…Nginx åŠ è½½æ’ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MacOS-openssl-é—®é¢˜"><span class="toc-text">MacOS openssl é—®é¢˜</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Nginxè¯»å–phpç›®å½•æƒé™é—®é¢˜"><span class="toc-text">Nginxè¯»å–phpç›®å½•æƒé™é—®é¢˜</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Rediså®‰è£…"><span class="toc-text">Rediså®‰è£…</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ç¼–è¯‘é—®é¢˜-cc-command-not-found"><span class="toc-text">ç¼–è¯‘é—®é¢˜ cc: command not found</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ç¼–è¯‘é—®é¢˜-fatal-error-jemalloc-jemalloc-h-No-such-file-or-directory"><span class="toc-text">ç¼–è¯‘é—®é¢˜ fatal error: jemalloc/jemalloc.h: No such file or directory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ç¼–è¯‘é—®é¢˜-You-need-tcl-8-5-or-newer-in-order-to-run-the-Redis-test"><span class="toc-text">ç¼–è¯‘é—®é¢˜ You need tcl 8.5 or newer in order to run the Redis test</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PHP-å®‰è£…-freetypeé—®é¢˜"><span class="toc-text">PHP å®‰è£… freetypeé—®é¢˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ•°æ®åº“"><span class="toc-text">æ•°æ®åº“</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#æ—¶åŒºé—®é¢˜"><span class="toc-text">æ—¶åŒºé—®é¢˜</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å‚è€ƒèµ„æ–™"><span class="toc-text">å‚è€ƒèµ„æ–™</span></a></li></ol>
    </div>
  </div>



    <div class="post-content">
      
        <h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul>
<li>CentOS</li>
<li>Nginx</li>
<li>PHP 7+</li>
<li>PHP-FPM</li>
<li>MariaDB</li>
</ul>
<h2 id="ç³»ç»Ÿå®‰è£…"><a href="#ç³»ç»Ÿå®‰è£…" class="headerlink" title="ç³»ç»Ÿå®‰è£…"></a>ç³»ç»Ÿå®‰è£…</h2><blockquote>
<p>ç³»ç»Ÿï¼šCentOS 7.x</p>
</blockquote>
<p>ä¸‹è½½<a href="http://isoredirect.centos.org/centos/7/isos/x86_64/CentOS-7-x86_64-Minimal-1708.iso" target="_blank" rel="noopener">Centos Minimal</a>ç‰ˆæœ¬</p>
<p>ä½¿ç”¨VMware æ¥å®‰è£…CentOS ç³»ç»Ÿ</p>
<h2 id="Nginx-å®‰è£…"><a href="#Nginx-å®‰è£…" class="headerlink" title="Nginx å®‰è£…"></a>Nginx å®‰è£…</h2><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># ä¸‹è½½NginxåŒ…ï¼Œå¹¶è§£å‹åˆ°/root/nginx</span><br><span class="line"># cd åˆ°nginxåŒ…(/root/nginx) ç›®å½•ä¸­</span><br><span class="line">$ cd /root/nginx</span><br><span class="line"></span><br><span class="line"># å®‰è£…</span><br><span class="line">## æ²¡æœ‰æƒé™éœ€è¦æ‰§è¡Œæˆæƒå‘½ä»¤</span><br><span class="line">$ chmod +x  ./configure</span><br><span class="line">## å®‰è£…é…ç½®</span><br><span class="line">$ ./configure </span><br><span class="line"># æ‰§è¡Œå®‰è£…</span><br><span class="line">$ make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
<h3 id="Nginx-ç®¡ç†è„šæœ¬"><a href="#Nginx-ç®¡ç†è„šæœ¬" class="headerlink" title="Nginx ç®¡ç†è„šæœ¬"></a>Nginx ç®¡ç†è„šæœ¬</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vi /etc/init.d/nginx</span><br></pre></td></tr></table></figure>
<p>è„šæœ¬å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#</span>! /bin/sh</span><br><span class="line"><span class="meta">#</span> chkconfig: 2345 55 25</span><br><span class="line"><span class="meta">#</span> Description: Startup script for nginx webserver on Debian. Place in /etc/init.d and</span><br><span class="line"><span class="meta">#</span> run 'update-rc.d -f nginx defaults', or use the appropriate command on your</span><br><span class="line"><span class="meta">#</span> distro. For CentOS/Redhat run: 'chkconfig --add nginx'</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>## BEGIN INIT INFO</span><br><span class="line"><span class="meta">#</span> Provides:          nginx</span><br><span class="line"><span class="meta">#</span> Required-Start:    $all</span><br><span class="line"><span class="meta">#</span> Required-Stop:     $all</span><br><span class="line"><span class="meta">#</span> Default-Start:     2 3 4 5</span><br><span class="line"><span class="meta">#</span> Default-Stop:      0 1 6</span><br><span class="line"><span class="meta">#</span> Short-Description: starts the nginx web server</span><br><span class="line"><span class="meta">#</span> Description:       starts nginx using start-stop-daemon</span><br><span class="line"><span class="meta">#</span>## END INIT INFO</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> Author:   licess</span><br><span class="line"><span class="meta">#</span> website:  http://lnmp.org</span><br><span class="line"></span><br><span class="line">PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/</span><br><span class="line">NAME=nginx</span><br><span class="line">NGINX_BIN=/usr/local/nginx/sbin/$NAME</span><br><span class="line">CONFIGFILE=/usr/local/nginx/conf/$NAME.conf</span><br><span class="line">PIDFILE=/usr/local/nginx/logs/$NAME.pid</span><br><span class="line">case "$1" in</span><br><span class="line">    start)</span><br><span class="line">        echo -n "Starting $NAME... "</span><br><span class="line"></span><br><span class="line">        if netstat -tnpl | grep -q nginx;then</span><br><span class="line">            echo "$NAME (pid `pidof $NAME`) already running."</span><br><span class="line">            exit 1</span><br><span class="line">        fi</span><br><span class="line"></span><br><span class="line">        $NGINX_BIN -c $CONFIGFILE</span><br><span class="line"></span><br><span class="line">        if [ "$?" != 0 ] ; then</span><br><span class="line">            echo " failed"</span><br><span class="line">            exit 1</span><br><span class="line">        else</span><br><span class="line">            echo " done"</span><br><span class="line">        fi</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    stop)</span><br><span class="line">        echo -n "Stoping $NAME... "</span><br><span class="line"></span><br><span class="line">        if ! netstat -tnpl | grep -q nginx; then</span><br><span class="line">            echo "$NAME is not running."</span><br><span class="line">            exit 1</span><br><span class="line">        fi</span><br><span class="line"></span><br><span class="line">        $NGINX_BIN -s stop</span><br><span class="line"></span><br><span class="line">        if [ "$?" != 0 ] ; then</span><br><span class="line">            echo " failed. Use force-quit"</span><br><span class="line">            exit 1</span><br><span class="line">        else</span><br><span class="line">            echo " done"</span><br><span class="line">        fi</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    status)</span><br><span class="line">        if netstat -tnpl | grep -q nginx; then</span><br><span class="line">            PID=`pidof nginx`</span><br><span class="line">            echo "$NAME (pid $PID) is running..."</span><br><span class="line">        else</span><br><span class="line">            echo "$NAME is stopped"</span><br><span class="line">            exit 0</span><br><span class="line">        fi</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    force-quit)</span><br><span class="line">        echo -n "Terminating $NAME... "</span><br><span class="line"></span><br><span class="line">        if ! netstat -tnpl | grep -q nginx; then</span><br><span class="line">            echo "$NAME is not running."</span><br><span class="line">            exit 1</span><br><span class="line">        fi</span><br><span class="line"></span><br><span class="line">        kill `pidof $NAME`</span><br><span class="line"></span><br><span class="line">        if [ "$?" != 0 ] ; then</span><br><span class="line">            echo " failed"</span><br><span class="line">            exit 1</span><br><span class="line">        else</span><br><span class="line">            echo " done"</span><br><span class="line">        fi</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    restart)</span><br><span class="line">        $0 stop</span><br><span class="line">        sleep 1</span><br><span class="line">        $0 start</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    reload)</span><br><span class="line">        echo -n "Reload service $NAME... "</span><br><span class="line"></span><br><span class="line">        if netstat -tnpl | grep -q nginx; then</span><br><span class="line">            $NGINX_BIN -s reload</span><br><span class="line">            echo " done"</span><br><span class="line">        else</span><br><span class="line">            echo "$NAME is not running, can't reload."</span><br><span class="line">            exit 1</span><br><span class="line">        fi</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    configtest)</span><br><span class="line">        echo -n "Test $NAME configure files... "</span><br><span class="line"></span><br><span class="line">        $NGINX_BIN -t</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    *)</span><br><span class="line">        echo "Usage: $0 &#123;start|stop|force-quit|restart|reload|status|configtest&#125;"</span><br><span class="line">        exit 1</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
<h3 id="æˆæƒäºä½¿ç”¨"><a href="#æˆæƒäºä½¿ç”¨" class="headerlink" title="æˆæƒäºä½¿ç”¨"></a>æˆæƒäºä½¿ç”¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ chmod a+x /etc/init.d/nginx</span><br></pre></td></tr></table></figure>
<h4 id="ä½¿ç”¨chkconfigè¿›è¡Œç®¡ç†"><a href="#ä½¿ç”¨chkconfigè¿›è¡Œç®¡ç†" class="headerlink" title="ä½¿ç”¨chkconfigè¿›è¡Œç®¡ç†"></a>ä½¿ç”¨chkconfigè¿›è¡Œç®¡ç†</h4><p>ä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œå¯ä»¥å°†nginxåŠ åˆ°chkconfigä¸­è¿›è¡Œç®¡ç†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">## æ·»åŠ åˆ°chkconfigä¸­</span><br><span class="line">$ chkconfig --add /etc/init.d/nginx </span><br><span class="line">## å¯åŠ¨Nginx</span><br><span class="line">$ service nginx start</span><br><span class="line">## åœæ­¢Nginx</span><br><span class="line">$ service nginx stop</span><br><span class="line">## è®¾ç½®å¼€æœºå¯åŠ¨</span><br><span class="line">$ chkconfig nginx on</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">## PHP 7.2.3</span><br><span class="line"></span><br><span class="line">### Nginx PHPé›†æˆ </span><br><span class="line">&gt; è‡ªPHP-5.3.3èµ·ï¼ŒPHP-FPMåŠ å…¥åˆ°äº†PHPæ ¸å¿ƒï¼Œç¼–è¯‘æ—¶åŠ ä¸Š--enable-fpmå³å¯æä¾›æ”¯æŒã€‚ PHP-FPMä»¥å®ˆæŠ¤è¿›ç¨‹åœ¨åå°è¿è¡Œï¼ŒNginxå“åº”è¯·æ±‚åï¼Œè‡ªè¡Œå¤„ç†é™æ€è¯·æ±‚ï¼ŒPHPè¯·æ±‚åˆ™ç»è¿‡fastcgi_passäº¤ç”±PHP-FPMå¤„ç†ï¼Œå¤„ç†å®Œæ¯•åè¿”å›ã€‚ Nginxå’ŒPHP-FPMçš„ç»„åˆï¼Œæ˜¯ä¸€ç§ç¨³å®šã€é«˜æ•ˆçš„PHPè¿è¡Œæ–¹å¼ï¼Œæ•ˆç‡è¦æ¯”ä¼ ç»Ÿçš„Apacheå’Œmod_phpé«˜å‡ºä¸å°‘</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">### å®‰è£…</span><br><span class="line"></span><br><span class="line">``` code</span><br><span class="line">## ä¸‹è½½ä¾èµ–çš„åŒ… </span><br><span class="line">$ yum install -y git gcc gcc-c++  libxml2 libxml2-devel openssl pkgconfig openssl-devel  curl curl-devel libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel  gmp-devel  mariadb-devel aspell-devel recode-devel autoconf bison pcre pcre-devel libxslt  libxslt-devel bzip2 bzip2-devel</span><br><span class="line">  </span><br><span class="line">## ä¸‹è½½PHPæºç åŒ…</span><br><span class="line">$ cd ~/</span><br><span class="line">$ wget http://am1.php.net/distributions/php-7.2.3.tar.gz</span><br><span class="line">$ tar xfvz php-7.2.3.tar.gz</span><br><span class="line">$ cd php-7.2.3</span><br><span class="line">$ ./configure  --with-config-file-path=/usr/local/lib --with-config-file-scan-dir=/usr/local/lib/ext --with-mysql-sock=/dev/shm/mysql.sock --enable-mysqlnd --enable-fpm --disable-ipv6 --enable-mbstring --with-zlib --without-sqlite3 --without-pdo-sqlite --with-openssl --disable-pdo --enable-opcache --enable-sockets --without-pear  --disable-phar  --with-freetype-dir  --with-jpeg-dir --with-png-dir</span><br><span class="line"></span><br><span class="line">## ç¼–è¯‘å®‰è£…</span><br><span class="line">$ make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line">## php.ini</span><br><span class="line">$  cp php-7.2.3/php.ini-development  /usr/local/lib/ext/php.ini</span><br></pre></td></tr></table></figure>
<h3 id="PHP-FPM-æ¨¡å—"><a href="#PHP-FPM-æ¨¡å—" class="headerlink" title="PHP-FPM æ¨¡å—"></a>PHP-FPM æ¨¡å—</h3><blockquote>
<p>è‡ªPHP-5.3.3èµ·ï¼ŒPHP-FPMåŠ å…¥åˆ°äº†PHPæ ¸å¿ƒï¼Œç¼–è¯‘æ—¶åŠ ä¸Šâ€“enable-fpmå³å¯æä¾›æ”¯æŒã€‚ PHP-FPMä»¥å®ˆæŠ¤è¿›ç¨‹åœ¨åå°è¿è¡Œï¼ŒNginxå“åº”è¯·æ±‚åï¼Œè‡ªè¡Œå¤„ç†é™æ€è¯·æ±‚ï¼ŒPHPè¯·æ±‚åˆ™ç»è¿‡fastcgi_passäº¤ç”±PHP-FPMå¤„ç†ï¼Œå¤„ç†å®Œæ¯•åè¿”å›ã€‚ Nginxå’ŒPHP-FPMçš„ç»„åˆï¼Œæ˜¯ä¸€ç§ç¨³å®šã€é«˜æ•ˆçš„PHPè¿è¡Œæ–¹å¼ï¼Œæ•ˆç‡è¦æ¯”ä¼ ç»Ÿçš„Apacheå’Œmod_phpé«˜å‡ºä¸å°‘</p>
</blockquote>
<p>å…³äºFPMæ¨¡å—å¯ä»¥æŸ¥çœ‹<a href="https://github.com/php/php-src/tree/master/sapi/fpm" target="_blank" rel="noopener">https://github.com/php/php-src/tree/master/sapi/fpm</a></p>
<p>å¯¹äºPHP-FPMç®¡ç†å¯ä»¥å‚è€ƒæºç çš„è„šæœ¬<a href="https://github.com/php/php-src/blob/master/sapi/fpm/init.d.php-fpm.in" target="_blank" rel="noopener">https://github.com/php/php-src/blob/master/sapi/fpm/init.d.php-fpm.in</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ cp ~/php-7.2.3/sapi/fpm/init.d.php-fpm.in /etc/init.d/php-fpm</span><br><span class="line">$ chmod +x /etc/init.d/php-fpm</span><br><span class="line"></span><br><span class="line">## php-fpmè„šæœ¬ä½¿ç”¨</span><br><span class="line">$ /etc/init.d/php-fpm &#123;start|stop|force-quit|restart|reload|status|configtest&#125;</span><br><span class="line"></span><br><span class="line">## php-fpmé…ç½®</span><br><span class="line"> </span><br><span class="line">$ cp ~/php-7.2.3/sapi/fpm/php-fpm.conf.in /usr/local/etc/php-fpm.conf</span><br><span class="line"> </span><br><span class="line">$ mkdir /usr/local/etc/php-fpm.d/</span><br><span class="line"></span><br><span class="line">$ cp ~/php-7.2.3/sapi/fpm/www.conf.in   /usr/local/etc/php-fpm.d/www.conf</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹php-fpm.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ vi /usr/local/etc/php-fpm.conf</span><br><span class="line"></span><br><span class="line">## include å€¼</span><br><span class="line">include=/usr/local/etc/php-fpm.d/www.conf</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹/etc/init.d/php-fpm</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">php_fpm_BIN=/usr/local/sbin/php-fpm</span><br><span class="line">php_fpm_CONF=/usr/local/etc/php-fpm.conf</span><br><span class="line">php_fpm_PID=/usr/local/php/run/php-fpm.pid</span><br></pre></td></tr></table></figure>
<h3 id="PHPæ‰©å±•"><a href="#PHPæ‰©å±•" class="headerlink" title="PHPæ‰©å±•"></a>PHPæ‰©å±•</h3><blockquote>
<p>PHPæºç é›†æˆä¸€äº›æ¯”è¾ƒæµè¡Œçš„PHPç»„ä»¶,å¯ä»¥åœ¨ext/ç›®å½•æŸ¥çœ‹</p>
</blockquote>
<h4 id="ç»„ä»¶å®‰è£…"><a href="#ç»„ä»¶å®‰è£…" class="headerlink" title="ç»„ä»¶å®‰è£…"></a>ç»„ä»¶å®‰è£…</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">## è¿›å…¥æ‰©å±•ç›®å½•</span><br><span class="line">$ cd ext/</span><br><span class="line">## è¿›å…¥éœ€è¦æ‰©å±•çš„ç»„ä»¶ç›®å½•ï¼Œä¾‹å¦‚ï¼šgdç»„ä»¶</span><br><span class="line">$ cd gd</span><br><span class="line">## å¯ä»¥ä½¿ç”¨-help,æŸ¥çœ‹ç»„ä»¶è¯´æ˜</span><br><span class="line">$ ./configure -help </span><br><span class="line">## ç¼–è¯‘å®‰è£…</span><br><span class="line">$ phpize &amp;&amp; ./configure &amp;&amp; make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
<h3 id="PHP-å¸¸ç”¨å‘½ä»¤"><a href="#PHP-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="PHP å¸¸ç”¨å‘½ä»¤"></a>PHP å¸¸ç”¨å‘½ä»¤</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥çœ‹phpç‰ˆæœ¬</span><br><span class="line">$ php -v</span><br><span class="line"># æŸ¥çœ‹php php.iniæ–‡ä»¶ä½ç½®</span><br><span class="line">$ php --ini</span><br></pre></td></tr></table></figure>
<h3 id="åˆ é™¤PHP"><a href="#åˆ é™¤PHP" class="headerlink" title="åˆ é™¤PHP"></a>åˆ é™¤PHP</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum remove php*</span><br></pre></td></tr></table></figure>
<h2 id="æ•°æ®åº“æ­å»º"><a href="#æ•°æ®åº“æ­å»º" class="headerlink" title="æ•°æ®åº“æ­å»º"></a>æ•°æ®åº“æ­å»º</h2><h3 id="MariaDB-10-2-13"><a href="#MariaDB-10-2-13" class="headerlink" title="MariaDB 10.2.13"></a>MariaDB 10.2.13</h3><blockquote>
<p>MariaDBæœ‰2ä¸ªåˆ†æ”¯ç‰ˆæœ¬5.xå’Œ10.x,5.xä¸»è¦å…¼å®¹MYSQL5.xè€Œ10.xä¸ºMariaDBè‡ªèº«ç‰ˆæœ¬</p>
</blockquote>
<h4 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><blockquote>
<p>é…ç½®MariaDBå®˜æ–¹æº</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vi /etc/yum.repos.d/MariaDB.repo</span><br></pre></td></tr></table></figure>
<p>æºå†…å®¹å¦‚ä¸‹:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># MariaDB 10.2 CentOS repository list - created 2018-03-21 08:03 UTC</span><br><span class="line"># http://downloads.mariadb.org/mariadb/repositories/</span><br><span class="line">[mariadb]</span><br><span class="line">name = MariaDB</span><br><span class="line">baseurl = http://yum.mariadb.org/10.2/centos7-amd64</span><br><span class="line">gpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB</span><br><span class="line">gpgcheck=1</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install MariaDB-server</span><br></pre></td></tr></table></figure>
<p>ç¦»çº¿ä¸‹è½½ï¼š<a href="https://downloads.mariadb.com/MariaDB/mariadb-10.2/yum/centos/7/x86_64/rpms/" target="_blank" rel="noopener">https://downloads.mariadb.com/MariaDB/mariadb-10.2/yum/centos/7/x86_64/rpms/</a></p>
<h4 id="MariaDBç®¡ç†å‘½ä»¤"><a href="#MariaDBç®¡ç†å‘½ä»¤" class="headerlink" title="MariaDBç®¡ç†å‘½ä»¤"></a>MariaDBç®¡ç†å‘½ä»¤</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ systemctl start mariadb  #å¯åŠ¨MariaDB</span><br><span class="line">$ systemctl stop mariadb  #åœæ­¢MariaDB</span><br><span class="line">$ systemctl restart mariadb  #é‡å¯MariaDB</span><br><span class="line">$ systemctl enable mariadb  #è®¾ç½®å¼€æœºå¯åŠ¨</span><br></pre></td></tr></table></figure>
<h4 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">## å¯åŠ¨MariaDB,å¹¶è®¾ç½®å¼€æœºå¯åŠ¨ </span><br><span class="line">$ systemctl start mariadb </span><br><span class="line">$ systemctl enable mariadb   </span><br><span class="line">## è¿›å»MariaDB,æŒ‰Enterè¿›å…¥</span><br><span class="line">$ mysql -uroot -p</span><br></pre></td></tr></table></figure>
<h4 id="å…è®¸è¿œç¨‹è¿æ¥"><a href="#å…è®¸è¿œç¨‹è¿æ¥" class="headerlink" title="å…è®¸è¿œç¨‹è¿æ¥"></a>å…è®¸è¿œç¨‹è¿æ¥</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">## è¿›å…¥åˆ°mysqlæ•°æ®åº“</span><br><span class="line">mysql&gt; use mysql;</span><br><span class="line">Database changed</span><br><span class="line"> </span><br><span class="line">## æŸ¥çœ‹ç™»å½•ç”¨æˆ·ä¿¡æ¯,Hostå·²ç»åŒ…å«%çš„é…ç½®</span><br><span class="line">mysql&gt; SELECT User, Host FROM mysql.user WHERE Host &lt;&gt; &apos;localhost&apos;;</span><br><span class="line">+--------+-----------+</span><br><span class="line">| User   | Host      |</span><br><span class="line">+--------+-----------+ </span><br><span class="line">| root   | 127.0.0.1 |</span><br><span class="line">| root   | ::1       |</span><br><span class="line">| root   | gandalf   |</span><br><span class="line">+--------+-----------+ </span><br><span class="line"></span><br><span class="line">## æˆäºˆä»»ä½•ä¸»æœºè®¿é—®æƒé™ </span><br><span class="line">  </span><br><span class="line">## æˆäºˆä»»ä½•ä¸»æœºè®¿é—®æƒé™ </span><br><span class="line">### % ä¸ºé€šé…ç¬¦ï¼Œå¦‚æœéœ€è¦é™åˆ¶æŸIPæ®µå¯ä»¥æ”¹ä¸º&apos;root&apos;@&apos;192.168.%&apos;</span><br><span class="line">mysql&gt; GRANT ALL PRIVILEGES ON *.* TO &apos;root&apos;@&apos;%&apos; IDENTIFIED BY &apos;123456&apos; WITH GRANT OPTION;</span><br><span class="line"></span><br><span class="line">## æŸ¥çœ‹ç™»å½•ç”¨æˆ·ä¿¡æ¯æ˜¯å¦å·²ç»æœ‰Hostä¸º%é€šé…ç¬¦çš„æ•°æ®</span><br><span class="line">mysql&gt; SELECT User, Host FROM mysql.user WHERE Host &lt;&gt; &apos;localhost&apos;;</span><br><span class="line">+------+-----------------------+</span><br><span class="line">| User | Host                  |</span><br><span class="line">+------+-----------------------+</span><br><span class="line">| root | %                     |</span><br><span class="line">| root | 127.0.0.1             |</span><br><span class="line">| root | ::1                   |</span><br><span class="line">|      | localhost.localdomain |</span><br><span class="line">| root | localhost.localdomain |</span><br><span class="line">+------+-----------------------+</span><br><span class="line"></span><br><span class="line">## åˆ·æ–°é…ç½®</span><br><span class="line">mysql&gt; flush privileges;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## æŸ¥çœ‹å½“å‰MariaDBç‰ˆæœ¬</span><br><span class="line">mysql&gt;  select version();</span><br><span class="line">+-----------------+</span><br><span class="line">| version()       |</span><br><span class="line">+-----------------+</span><br><span class="line">| 10.2.13-MariaDB |</span><br><span class="line">+-----------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 3306é»˜è®¤ç«¯å£å¼€æ”¾</span><br><span class="line">ä¿®æ”¹é˜²ç«å¢™è§„åˆ™</span><br><span class="line">$ firewall-cmd --add-port=3306/tcp </span><br><span class="line">$ firewall-cmd --permanent --add-port=3306/tcp</span><br></pre></td></tr></table></figure>
<h4 id="ä¿®æ”¹rootå¯†ç "><a href="#ä¿®æ”¹rootå¯†ç " class="headerlink" title="ä¿®æ”¹rootå¯†ç "></a>ä¿®æ”¹rootå¯†ç </h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">## è¿›å…¥MariaDB </span><br><span class="line">$ mysql -u root -h 192.168.1.201 -p 3306 </span><br><span class="line">$ use mysql</span><br><span class="line">$ update user set password=password(&apos;123456&apos;) where user=&apos;root&apos;; </span><br><span class="line">$ flush privileges;</span><br><span class="line">$ exit;</span><br></pre></td></tr></table></figure>
<h3 id="æ•°æ®åº“å¸è½½"><a href="#æ•°æ®åº“å¸è½½" class="headerlink" title="æ•°æ®åº“å¸è½½"></a>æ•°æ®åº“å¸è½½</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ yum -y remove mari*</span><br><span class="line">$ rm -rf /var/lib/mysql/*</span><br></pre></td></tr></table></figure>
<h2 id="Redis-å®‰è£…"><a href="#Redis-å®‰è£…" class="headerlink" title="Redis å®‰è£…"></a>Redis å®‰è£…</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">## å®‰è£…wgetåŒ…ï¼Œæœ‰å¯ä»¥å¿½ç•¥</span><br><span class="line">$ yum -y install wget</span><br><span class="line">## ä¸‹è½½Redis</span><br><span class="line">$ wget http://download.redis.io/releases/redis-4.0.8.tar.gz </span><br><span class="line">## è§£å‹Redis</span><br><span class="line">$ tar xzf redis-4.0.8.tar.gz </span><br><span class="line">## ç¼–è¯‘å®‰è£…Redis</span><br><span class="line">$ cd redis-4.0.8</span><br><span class="line">## å®‰è£…makeåŒ…ï¼Œæœ‰å¯ä»¥å¿½ç•¥</span><br><span class="line">$ yum install make </span><br><span class="line">$ make test</span><br><span class="line">$ make install</span><br><span class="line">## å°†Redisæ·»åŠ åˆ°æœåŠ¡</span><br><span class="line">$ cd utils </span><br><span class="line">$ ./install_server.sh</span><br><span class="line">## æŸ¥çœ‹Redisç‰ˆæœ¬</span><br><span class="line">$ redis-server -v</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vi /etc/init.d/redis</span><br></pre></td></tr></table></figure>
<p>å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line">#</span><br><span class="line"># redis - this script starts and stops the redis-server daemon</span><br><span class="line">#</span><br><span class="line"># chkconfig:   2345 85 15 </span><br><span class="line"># description:  Redis is a persistent key-value database</span><br><span class="line"># processname: redis-server</span><br><span class="line"># config:      /etc/redis.conf</span><br><span class="line"># config:      /etc/sysconfig/redis</span><br><span class="line"># pidfile:     /var/run/redis.pid</span><br><span class="line"></span><br><span class="line"># Source function library.</span><br><span class="line">. /etc/rc.d/init.d/functions</span><br><span class="line"></span><br><span class="line"># Source networking configuration.</span><br><span class="line">. /etc/sysconfig/network</span><br><span class="line"></span><br><span class="line"># Check that networking is up.</span><br><span class="line">[ &quot;$NETWORKING&quot; = &quot;no&quot; ] &amp;&amp; exit 0</span><br><span class="line"></span><br><span class="line">redis=&quot;/usr/local/bin/redis-server&quot;</span><br><span class="line">prog=$(basename $redis)</span><br><span class="line"></span><br><span class="line">REDIS_CONF_FILE=&quot;/etc/redis.conf&quot;</span><br><span class="line"></span><br><span class="line">[ -f /etc/sysconfig/redis ] &amp;&amp; . /etc/sysconfig/redis</span><br><span class="line"></span><br><span class="line">lockfile=/var/run/redis.pid</span><br><span class="line"></span><br><span class="line">start() &#123;</span><br><span class="line">    [ -x $redis ] || exit 5</span><br><span class="line">    [ -f $REDIS_CONF_FILE ] || exit 6</span><br><span class="line">    #redis has daemonize in it&apos;s own code!</span><br><span class="line">    $redis $REDIS_CONF_FILE</span><br><span class="line">    retval=$?</span><br><span class="line">    if [ $retval -eq 0 ]</span><br><span class="line">    then</span><br><span class="line">        action $&quot;Starting $prog: &quot; /bin/true</span><br><span class="line">        touch $lockfile</span><br><span class="line">    else</span><br><span class="line">        action $&quot;Starting $prog: &quot; /bin/false</span><br><span class="line">    fi</span><br><span class="line">    return $retval</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">stop() &#123;</span><br><span class="line">    echo -n $&quot;Stopping $prog: &quot;</span><br><span class="line">    killproc $prog -QUIT</span><br><span class="line">    retval=$?</span><br><span class="line">    echo</span><br><span class="line">    [ $retval -eq 0 ] &amp;&amp; rm -f $lockfile</span><br><span class="line">    return $retval</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">restart() &#123;</span><br><span class="line">    stop</span><br><span class="line">    start</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">reload() &#123;</span><br><span class="line">    echo -n $&quot;Reloading $prog: &quot;</span><br><span class="line">    killproc $redis -HUP</span><br><span class="line">    RETVAL=$?</span><br><span class="line">    echo</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">force_reload() &#123;</span><br><span class="line">    restart</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">rh_status() &#123;</span><br><span class="line">    status $prog</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">rh_status_q() &#123;</span><br><span class="line">    rh_status &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">case &quot;$1&quot; in</span><br><span class="line">    start)</span><br><span class="line">        rh_status_q &amp;&amp; exit 0</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">    stop)</span><br><span class="line">        rh_status_q || exit 0</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">    restart|configtest)</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">    reload)</span><br><span class="line">        rh_status_q || exit 7</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">    force-reload)</span><br><span class="line">        force_reload</span><br><span class="line">        ;;</span><br><span class="line">    status)</span><br><span class="line">        rh_status</span><br><span class="line">        ;;</span><br><span class="line">    condrestart|try-restart)</span><br><span class="line">        rh_status_q || exit 0</span><br><span class="line">	    ;;</span><br><span class="line">    *)</span><br><span class="line">        echo $&quot;Usage: $0 &#123;start|stop|status|restart|condrestart|try-restart|reload|force-reload&#125;&quot;</span><br><span class="line">        exit 2</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
<p>å¢åŠ æœåŠ¡å¼€æœºå¯åŠ¨æœåŠ¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chmod +x /etc/init.d/redis    </span><br><span class="line">chkconfig --add redis    </span><br><span class="line">chkconfig --level 345 redis on    </span><br><span class="line">chkconfig --list redis</span><br></pre></td></tr></table></figure>
<h2 id="é˜²ç«å¢™"><a href="#é˜²ç«å¢™" class="headerlink" title="é˜²ç«å¢™"></a>é˜²ç«å¢™</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">## æŸ¥çœ‹é˜²ç«å¢™è§„åˆ™</span><br><span class="line">$ sudo firewall-cmd --list-all</span><br><span class="line"></span><br><span class="line">## æ°¸ä¹…å¼€æ”¾éœ€è¦çš„ç«¯å£</span><br><span class="line">$ sudo firewall-cmd --zone=public --add-port=3306/tcp --permanent</span><br><span class="line">$ sudo firewall-cmd --reload</span><br><span class="line"></span><br><span class="line">## å¸¸ç”¨å‘½ä»¤</span><br><span class="line"></span><br><span class="line">## é‡å¯é˜²ç«å¢™</span><br><span class="line">systemctl restart firewalld</span><br><span class="line">## æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€</span><br><span class="line">firewall-cmd --state</span><br><span class="line">firewall-cmd --list-all</span><br><span class="line">## å…³é—­é˜²ç«å¢™</span><br><span class="line">systemctl disable firewalld</span><br><span class="line">systemctl stop firewalld </span><br><span class="line">## å¯åŠ¨é˜²ç«å¢™</span><br><span class="line">systemctl enable firewalld</span><br><span class="line">systemctl start firewalld</span><br><span class="line">systemctl status firewalld</span><br></pre></td></tr></table></figure>
<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><h3 id="ç³»ç»Ÿå®‰è£…-1"><a href="#ç³»ç»Ÿå®‰è£…-1" class="headerlink" title="ç³»ç»Ÿå®‰è£…"></a>ç³»ç»Ÿå®‰è£…</h3><h4 id="CentOS-7-minimal-ç‰ˆæœ¬å®‰è£…åç½‘ç»œé…ç½®"><a href="#CentOS-7-minimal-ç‰ˆæœ¬å®‰è£…åç½‘ç»œé…ç½®" class="headerlink" title="CentOS 7 minimal ç‰ˆæœ¬å®‰è£…åç½‘ç»œé…ç½®"></a>CentOS 7 minimal ç‰ˆæœ¬å®‰è£…åç½‘ç»œé…ç½®</h4><p>å¤„ç†ï¼š<a href="https://my.oschina.net/ihanfeng/blog/601853" target="_blank" rel="noopener">https://my.oschina.net/ihanfeng/blog/601853</a></p>
<p>æˆ–è€…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ cd /etc/sysconfig/network-scripts</span><br><span class="line">## å¯¹ifcfg-xxxç½‘ç»œé…ç½®æ–‡ä»¶è¿›è¡Œä¿®æ”¹</span><br><span class="line">$ vi ifcfg-xxx</span><br><span class="line">## é‡å¯ç½‘ç»œæœåŠ¡</span><br><span class="line">$ service network restart</span><br></pre></td></tr></table></figure>
<h4 id="ifconfig-command-not-found"><a href="#ifconfig-command-not-found" class="headerlink" title="ifconfig: command not found"></a>ifconfig: command not found</h4><p>è§£å†³:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum install net-tools</span><br></pre></td></tr></table></figure>
<h3 id="Nginx-å®‰è£…-1"><a href="#Nginx-å®‰è£…-1" class="headerlink" title="Nginx å®‰è£…"></a>Nginx å®‰è£…</h3><h4 id="æ‰§è¡Œ-configure-æ—¶å€™å‡ºé”™-1"><a href="#æ‰§è¡Œ-configure-æ—¶å€™å‡ºé”™-1" class="headerlink" title="æ‰§è¡Œ  ./configure æ—¶å€™å‡ºé”™ 1"></a>æ‰§è¡Œ  ./configure æ—¶å€™å‡ºé”™ 1</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">checking for OS</span><br><span class="line"> + Linux 2.6.32-642.el6.x86_64 x86_64</span><br><span class="line">checking for C compiler ... not found</span><br><span class="line"></span><br><span class="line">./configure: error: C compiler cc is not found</span><br></pre></td></tr></table></figure>
<p>å¤„ç†ï¼š<br>å¦‚æœå®‰è£…å‡ºç°åœ¨ä¸‹é¢çš„é”™è¯¯æ˜¯ç¼ºå°‘ç¼–è¯‘ç¯å¢ƒ,å®‰è£…ç¼–è¯‘æºç æ‰€éœ€çš„å·¥å…·å’Œåº“</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum -y install gcc</span><br></pre></td></tr></table></figure>
<h4 id="æ‰§è¡Œ-configure-æ—¶å€™å‡ºé”™-2"><a href="#æ‰§è¡Œ-configure-æ—¶å€™å‡ºé”™-2" class="headerlink" title="æ‰§è¡Œ  ./configure æ—¶å€™å‡ºé”™ 2"></a>æ‰§è¡Œ  ./configure æ—¶å€™å‡ºé”™ 2</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">./configure: error: the HTTP rewrite module requires the PCRE library.</span><br><span class="line">You can either disable the module by using --without-http_rewrite_module</span><br><span class="line">option, or install the PCRE library into the system, or build the PCRE library</span><br><span class="line">statically from the source with nginx by using --with-pcre=&lt;path&gt; option.</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum -y install pcre-devel openssl openssl-devel</span><br></pre></td></tr></table></figure>
<h4 id="å®‰è£…Nginx-åŠ è½½æ’ä»¶"><a href="#å®‰è£…Nginx-åŠ è½½æ’ä»¶" class="headerlink" title="å®‰è£…Nginx åŠ è½½æ’ä»¶"></a>å®‰è£…Nginx åŠ è½½æ’ä»¶</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --with-stream  --with-http_stub_status_module --with-http_ssl_module --with-http_realip_module --add-module=../nginx-sticky-module-1.1  --add-module=../nginx_upstream_check_module-master</span><br></pre></td></tr></table></figure>
<h4 id="MacOS-openssl-é—®é¢˜"><a href="#MacOS-openssl-é—®é¢˜" class="headerlink" title="MacOS openssl é—®é¢˜"></a>MacOS openssl é—®é¢˜</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ git clone git://git.openssl.org/openssl.git  </span><br><span class="line">$ sudo ./config --prefix=/usr/local/openssl  </span><br><span class="line">$ make </span><br><span class="line">$ make install  </span><br><span class="line">## æŸ¥çœ‹ç‰ˆæœ¬</span><br><span class="line">$ openssl version  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ‰“å¼€nginxæºæ–‡ä»¶ä¸‹çš„/usr/local/src/nginx-1.9.9/auto/lib/openssl/confæ–‡ä»¶ï¼š</span><br><span class="line">æ‰¾åˆ°è¿™ä¹ˆä¸€æ®µä»£ç ï¼š</span><br><span class="line">CORE_INCS=&quot;$CORE_INCS $OPENSSL/.openssl/include&quot;</span><br><span class="line">CORE_DEPS=&quot;$CORE_DEPS $OPENSSL/.openssl/include/openssl/ssl.h&quot;</span><br><span class="line">CORE_LIBS=&quot;$CORE_LIBS $OPENSSL/.openssl/lib/libssl.a&quot;</span><br><span class="line">CORE_LIBS=&quot;$CORE_LIBS $OPENSSL/.openssl/lib/libcrypto.a&quot;</span><br><span class="line">CORE_LIBS=&quot;$CORE_LIBS $NGX_LIBDL&quot;</span><br><span class="line">ä¿®æ”¹æˆä»¥ä¸‹ä»£ç ï¼š</span><br><span class="line">CORE_INCS=&quot;$CORE_INCS $OPENSSL/include&quot;</span><br><span class="line">CORE_DEPS=&quot;$CORE_DEPS $OPENSSL/include/openssl/ssl.h&quot;</span><br><span class="line">CORE_LIBS=&quot;$CORE_LIBS $OPENSSL/lib/libssl.a&quot;</span><br><span class="line">CORE_LIBS=&quot;$CORE_LIBS $OPENSSL/lib/libcrypto.a&quot;</span><br><span class="line">CORE_LIBS=&quot;$CORE_LIBS $NGX_LIBDL&quot;</span><br><span class="line"> ç„¶åå†è¿›è¡ŒNginxçš„ç¼–è¯‘å®‰è£…å³å¯</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥æŸ¥çœ‹<a href="http://www.cnblogs.com/dongruiha/p/7411718.html" target="_blank" rel="noopener">openssl error</a></p>
<h4 id="Nginxè¯»å–phpç›®å½•æƒé™é—®é¢˜"><a href="#Nginxè¯»å–phpç›®å½•æƒé™é—®é¢˜" class="headerlink" title="Nginxè¯»å–phpç›®å½•æƒé™é—®é¢˜"></a>Nginxè¯»å–phpç›®å½•æƒé™é—®é¢˜</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx: [emerg] getgrnam(&quot;root&quot;) failed in /usr/local/nginx/conf/nginx.conf:1</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ä¿®æ”¹/usr/local/nginx/conf/nginx.conf</p>
<p>æ·»åŠ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ user root owner;</span><br></pre></td></tr></table></figure>
<h3 id="Rediså®‰è£…"><a href="#Rediså®‰è£…" class="headerlink" title="Rediså®‰è£…"></a>Rediså®‰è£…</h3><h4 id="ç¼–è¯‘é—®é¢˜-cc-command-not-found"><a href="#ç¼–è¯‘é—®é¢˜-cc-command-not-found" class="headerlink" title="ç¼–è¯‘é—®é¢˜ cc: command not found"></a>ç¼–è¯‘é—®é¢˜ cc: command not found</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost redis-4.0.8]# make install</span><br><span class="line">cd src &amp;&amp; make install</span><br><span class="line">make[1]: Entering directory `/root/redis-4.0.8/src&apos;</span><br><span class="line">    CC adlist.o</span><br><span class="line">/bin/sh: cc: command not found</span><br><span class="line">make[1]: *** [adlist.o] Error 127</span><br><span class="line">make[1]: Leaving directory `/root/redis-4.0.8/src&apos;</span><br><span class="line">make: *** [install] Error 2</span><br></pre></td></tr></table></figure>
<p>è§£å†³:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum  install  gcc</span><br></pre></td></tr></table></figure>
<h4 id="ç¼–è¯‘é—®é¢˜-fatal-error-jemalloc-jemalloc-h-No-such-file-or-directory"><a href="#ç¼–è¯‘é—®é¢˜-fatal-error-jemalloc-jemalloc-h-No-such-file-or-directory" class="headerlink" title="ç¼–è¯‘é—®é¢˜ fatal error: jemalloc/jemalloc.h: No such file or directory"></a>ç¼–è¯‘é—®é¢˜ fatal error: jemalloc/jemalloc.h: No such file or directory</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost redis-4.0.8]# make install</span><br><span class="line">cd src &amp;&amp; make install</span><br><span class="line">make[1]: Entering directory `/root/redis-4.0.8/src&apos;</span><br><span class="line">    CC adlist.o</span><br><span class="line">In file included from adlist.c:34:0:</span><br><span class="line">zmalloc.h:50:31: fatal error: jemalloc/jemalloc.h: No such file or directory</span><br><span class="line"> #include &lt;jemalloc/jemalloc.h&gt;</span><br><span class="line">                               ^</span><br><span class="line">compilation terminated.</span><br><span class="line">make[1]: *** [adlist.o] Error 1</span><br><span class="line">make[1]: Leaving directory `/root/redis-4.0.8/src&apos;</span><br><span class="line">make: *** [install] Error 2</span><br></pre></td></tr></table></figure>
<p>è§£å†³ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ make MALLOC=libc</span><br></pre></td></tr></table></figure>
<h4 id="ç¼–è¯‘é—®é¢˜-You-need-tcl-8-5-or-newer-in-order-to-run-the-Redis-test"><a href="#ç¼–è¯‘é—®é¢˜-You-need-tcl-8-5-or-newer-in-order-to-run-the-Redis-test" class="headerlink" title="ç¼–è¯‘é—®é¢˜ You need tcl 8.5 or newer in order to run the Redis test"></a>ç¼–è¯‘é—®é¢˜ You need tcl 8.5 or newer in order to run the Redis test</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost redis-4.0.8]# make install</span><br><span class="line">cd src &amp;&amp; make install</span><br><span class="line">make[1]: Entering directory `/root/redis-4.0.8/src&apos;</span><br><span class="line"></span><br><span class="line">Hint: It&apos;s a good idea to run &apos;make test&apos; ;)</span><br><span class="line"></span><br><span class="line">    INSTALL install</span><br><span class="line">    INSTALL install</span><br><span class="line">    INSTALL install</span><br><span class="line">    INSTALL install</span><br><span class="line">    INSTALL install</span><br><span class="line">make[1]: Leaving directory `/root/redis-4.0.8/src&apos;</span><br><span class="line">[root@localhost redis-4.0.8]# make test</span><br><span class="line">cd src &amp;&amp; make test</span><br><span class="line">make[1]: Entering directory `/root/redis-4.0.8/src&apos;</span><br><span class="line">You need tcl 8.5 or newer in order to run the Redis test</span><br><span class="line">make[1]: *** [test] Error 1</span><br><span class="line">make[1]: Leaving directory `/root/redis-4.0.8/src&apos;</span><br><span class="line">make: *** [test] Error 2</span><br></pre></td></tr></table></figure>
<p>è§£å†³ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum install tcl</span><br></pre></td></tr></table></figure>
<h3 id="PHP-å®‰è£…-freetypeé—®é¢˜"><a href="#PHP-å®‰è£…-freetypeé—®é¢˜" class="headerlink" title="PHP å®‰è£… freetypeé—®é¢˜"></a>PHP å®‰è£… freetypeé—®é¢˜</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># å®‰è£…freetype </span><br><span class="line">$ wget http://ftp.twaren.net/Unix/NonGNU/freetype/freetype-2.5.5.tar.gz</span><br><span class="line"></span><br><span class="line">$ tar -xf freetype-2.5.5.tar.gz</span><br><span class="line"></span><br><span class="line">$ cd freetype-2.5.5</span><br><span class="line">$ ./configure --prefix=/usr/local/freetype</span><br><span class="line"></span><br><span class="line">$ make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line"># è·³è½¬åˆ°phpæºç GDç›®å½•  </span><br><span class="line">$ cd php-7.2.3/ext/gd/   ##å®šä½åˆ°GDç›®å½•</span><br><span class="line"></span><br><span class="line">$ phpize</span><br><span class="line"></span><br><span class="line">$ ./configure --with-php-config=/usr/local/bin/php-config  --with-jpeg-dir --with-png-dir  --with-freetype-dir=/usr/include/freetype2/freetype/</span><br><span class="line"></span><br><span class="line">$ make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
<h3 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h3><h4 id="æ—¶åŒºé—®é¢˜"><a href="#æ—¶åŒºé—®é¢˜" class="headerlink" title="æ—¶åŒºé—®é¢˜"></a>æ—¶åŒºé—®é¢˜</h4><blockquote>
<p>ä¼ é€é—¨ -&gt; <a href="https://mariadb.com/kb/en/library/time-zones/" target="_blank" rel="noopener">https://mariadb.com/kb/en/library/time-zones/</a></p>
</blockquote>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a href="https://my.oschina.net/ihanfeng/blog/601853" target="_blank" rel="noopener">CentOS 7 minimal ç‰ˆæœ¬å®‰è£…åç½‘ç»œé…ç½®</a></li>
<li><a href="https://mariadb.org/download/" target="_blank" rel="noopener">MariaDB</a> </li>
<li><a href="https://mariadb.com/kb/en/library/configuring-mariadb-for-remote-client-access/" target="_blank" rel="noopener">Configuring MariaDB for Remote Client Access</a></li>
<li><a href="https://www.zhihu.com/question/23412902" target="_blank" rel="noopener">MariaDB10.0.xå’Œ5.5.xæœ‰ä»€ä¹ˆåŒºåˆ« (çŸ¥ä¹) </a></li>
<li><a href="https://downloads.mariadb.org/mariadb/+releases/" target="_blank" rel="noopener">MariaDB - All Releases</a></li>
<li><a href="https://pear.php.net/" target="_blank" rel="noopener">Pear</a></li>
<li><a href="http://php.net/manual/zh" target="_blank" rel="noopener">PHP æ‰‹å†Œ</a></li>
<li><a href="https://pear.php.net/manual/en/installation.getting.php" target="_blank" rel="noopener">Pear Install</a></li>
<li><a href="https://pecl.php.net/" target="_blank" rel="noopener">Pecl Install</a></li>
<li><a href="https://rpmfind.net/linux/rpm2html/search.php?query=php-devel" target="_blank" rel="noopener">PHP Devel</a></li>
<li><a href="https://www.helloweba.net/server/498.html" target="_blank" rel="noopener">CentOS7 æºç ç¼–è¯‘å®‰è£…PHP7.2</a></li>
<li><a href="https://github.com/alibaba/nginx-http-concat" target="_blank" rel="noopener">nginx-http-concat Github</a></li>
<li><a href="https://github.com/oupula/ngx_image_thumb" target="_blank" rel="noopener">ngx_image_thumb Github</a></li>
<li><a href="https://github.com/alexeyrybak/blitz" target="_blank" rel="noopener">blitz Github</a></li>
<li><a href="https://blog.csdn.net/u013091013/article/details/51860303" target="_blank" rel="noopener">nginx 403</a></li>
</ul>

      
    </div>

    
      
      

  <div class="post-copyright">
    <p class="copyright-item">
      <span>åŸæ–‡ä½œè€…: </span>
      <a href="https://cotide.github.io">cotide</a>
    </p>
    <p class="copyright-item">
      <span>åŸæ–‡é“¾æ¥: </span>
      <a href="https://cotide.github.io/2018/09/03/php/PHP-ç¯å¢ƒæ­å»º/">https://cotide.github.io/2018/09/03/php/PHP-ç¯å¢ƒæ­å»º/</a>
    </p>
    <p class="copyright-item">
      <span>è®¸å¯åè®®: </span>
      
      <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 4.0 å›½é™…è®¸å¯åè®®</a>
    </p>
  </div>



      
      
    

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/phpè¿è¡Œç¯å¢ƒ/">phpè¿è¡Œç¯å¢ƒ</a>
            
              <a href="/tags/php/">php</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2018/09/04/php/PHP-Visual Studio Codeè°ƒè¯•/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">PHP-Visual Studio Codeè°ƒè¯•</span>
        <span class="prev-text nav-mobile">ä¸Šä¸€ç¯‡</span>
      </a>
    
    
      <a class="next" href="/2017/08/01/Cache/Redis  ä½¿ç”¨/">
        <span class="next-text nav-default">Redis ä½¿ç”¨</span>
        <span class="prev-text nav-mobile">ä¸‹ä¸€ç¯‡</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
  </div>


        </div>
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:xli.code@gmail.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
        
          <a href="https://twitter.com/xiaochaoli" class="iconfont icon-twitter" title="twitter"></a>
        
      
    
      
    
      
    
      
    
      
        
          <a href="https://github.com/cotide" class="iconfont icon-github" title="github"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    
    
      
      <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    
  </div>


<div class="copyright">
  <span class="power-by">
    ç”± <a class="hexo-link" href="https://hexo.io/">Hexo</a> å¼ºåŠ›é©±åŠ¨
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    ä¸»é¢˜ - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2015 - 
    
    2019

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">cotide</span>
  </span>
</div>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  
  

  



    
  



  
  





  
    <script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  

  
    <script type="text/javascript" src="/lib/pjax/jquery.pjax.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/nprogress/nprogress.min.js"></script>
  


    <script type="text/javascript" src="/js/src/even.js?v=2.9.0"></script>

  </body>
</html>
