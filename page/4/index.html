<!DOCTYPE html>
<html lang="">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">



  <meta name="description" content="☀️人生如画，岁月如歌🍻🍌🍍🍏🍊"/>




  <meta name="keywords" content="🍭 xcli’s Blog" />










  <link rel="alternate" href="/default" title="cotide’s Blog">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.9.0" />



<link rel="canonical" href="https://cotide.github.io/page/4/"/>



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" />




  <link rel="stylesheet" type="text/css" href="/lib/nprogress/nprogress.min.css" />



<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.9.0" />



  



  <script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>








<script>
  window.config = {"title":"cotide’s Blog","subtitle":null,"description":"☀️人生如画，岁月如歌🍻🍌🍍🍏🍊","author":"cotide","language":null,"timezone":null,"url":"https://cotide.github.io","root":"/","permalink":":year/:month/:day/:title/","permalink_defaults":null,"source_dir":"source","public_dir":"public","tag_dir":"tags","archive_dir":"archives","category_dir":"categories","code_dir":"downloads/code","i18n_dir":":lang","skip_render":null,"new_post_name":":title.md","default_layout":"post","titlecase":false,"external_link":true,"filename_case":0,"render_drafts":false,"post_asset_folder":false,"relative_link":false,"future":true,"highlight":{"enable":true,"auto_detect":false,"line_number":true,"tab_replace":null,"first_line_number":"always1"},"default_category":"uncategorized","category_map":null,"tag_map":null,"date_format":"YYYY-MM-DD","time_format":"HH:mm:ss","per_page":10,"pagination_dir":"page","theme":"even","deploy":{"type":null},"ignore":[],"keywords":"🍭 xcli’s Blog","index_generator":{"per_page":10,"order_by":"-date","path":""},"archive_generator":{"per_page":10,"yearly":true,"monthly":true,"daily":false},"category_generator":{"per_page":10},"tag_generator":{"per_page":10},"marked":{"gfm":true,"pedantic":false,"sanitize":false,"tables":true,"breaks":true,"smartLists":true,"smartypants":true,"modifyAnchors":"","autolink":true},"server":{"port":4000,"log":false,"compress":false,"header":true},"since":2015,"favicon":"/favicon.ico","rss":"default","menu":{"Home":"/","Archives":"/archives/","Tags":"/tags","About":"https://about.me/xcli"},"color":"Default","toc":true,"fancybox":true,"pjax":true,"copyright":{"enable":true,"license":"<a rel=\"license\" href=\"http://creativecommons.org/licenses/by-nc/4.0/\" target=\"_blank\">知识共享署名-非商业性使用 4.0 国际许可协议</a>"},"reward":{"enable":false,"qrCode":{"wechat":null,"alipay":null}},"social":{"email":"xli.code@gmail.com","stack-overflow":null,"twitter":"https://twitter.com/xiaochaoli","facebook":null,"linkedin":null,"google":null,"github":"https://github.com/cotide","weibo":null,"zhihu":null,"douban":null,"pocket":null,"tumblr":null,"instagram":null},"leancloud":"app_id:iLauMtmkcbk2wqR6LwO1nCqC-gzGzoHsz app_key:JosstohXgGKf2m8484aH1Ebq","baidu_analytics":null,"baidu_verification":null,"google_analytics":null,"google_verification":null,"disqus_shortname":null,"changyan":{"appid":null,"appkey":null},"livere_datauid":null,"version":"2.9.0"};
</script>

    <title> cotide’s Blog </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">cotide’s Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            首页
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            归档
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            标签
          
        </li>
      </a>
    
      <a href="https://about.me/xcli">
        <li class="mobile-menu-item">
          
          
            关于
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">cotide’s Blog</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              首页
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              归档
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              标签
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="https://about.me/xcli">
            
            
              关于
            
          </a>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  <section id="posts" class="posts">
    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2016/10/01/Plan/理财学习/">理财学习</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-10-01
        </span>
        
          <div class="post-category">
            
              <a href="/categories/Plan/">Plan</a>
            
          </div>
        
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        
          
        

        
          <p>关于理财方面收集的相关资料</p>
          <div class="read-more">
            <a href="/2016/10/01/Plan/理财学习/" class="read-more-link">阅读更多</a>
          </div>
        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2016/08/20/Framework/使用Mac搭建Hexo环境/">使用Mac搭建Hexo环境</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-08-20
        </span>
        
          <div class="post-category">
            
              <a href="/categories/框架/">框架</a>
            
          </div>
        
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        

        
          <h2 id="Hexo-框架"><a href="#Hexo-框架" class="headerlink" title="Hexo 框架"></a>Hexo 框架</h2><blockquote>
<p>Hexo 简介</p>
</blockquote>
<p>Hexo是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p>
<h2 id="使用条件"><a href="#使用条件" class="headerlink" title="使用条件"></a>使用条件</h2><ul>
<li><a href="https://nodejs.org/en/" target="_blank" rel="noopener">Node.js</a></li>
<li><a href="https://git-scm.com/" target="_blank" rel="noopener">Git</a></li>
</ul>
<h2 id="操作流程"><a href="#操作流程" class="headerlink" title="操作流程"></a>操作流程</h2><ul>
<li>安装 Node.js</li>
<li>安装 Git 工具</li>
</ul>
<h3 id="安装-Node-js"><a href="#安装-Node-js" class="headerlink" title="安装 Node.js"></a>安装 Node.js</h3><ol>
<li>前往<a href="https://nodejs.org/en/" target="_blank" rel="noopener">Node.js 官方</a> 下载安装包</li>
</ol>
<p>安装node.js方法很多，也可以使用 <a href="http://brew.sh/" target="_blank" rel="noopener">homebrew</a></p>
<p><img src="http://ww4.sinaimg.cn/large/7c2c6ab7gw1f5yzojlmw2j20m30hgdic.jpg" alt="下载Node.js 001"></p>
<p>关于LTS 和 Current版本区别 可以查阅官方 <a href="https://nodejs.org/en/blog/community/node-v5/" target="_blank" rel="noopener">Hexo 版本分支说明</a></p>
<p>安装node.js程序,点击继续一步步操作就ok了<br><img src="http://ww2.sinaimg.cn/large/7c2c6ab7gw1f5z1q7q2psj20jk0ei3za.jpg" alt="下载node.js"></p>
<ol start="2">
<li>检查node.js是否安装成功<br>打开终端输入:</li>
</ol>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ node -v</span><br></pre></td></tr></table></figure>
<p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7gw1f61o57tbg0j20i60ci0tb.jpg" alt="检查node.js是否安装成功"></p>
<h3 id="安装-Git工具"><a href="#安装-Git工具" class="headerlink" title="安装 Git工具"></a>安装 Git工具</h3><p>可以安装 <a href="https://git-scm.com/" target="_blank" rel="noopener">Git GUI</a> 或者使用 <a href="http://brew.sh/" target="_blank" rel="noopener">Homebrew</a> 进行安装</p>
<h3 id="使用-node-js-nvm-安装hexo"><a href="#使用-node-js-nvm-安装hexo" class="headerlink" title="使用 node.js nvm 安装hexo"></a>使用 node.js nvm 安装hexo</h3><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo npm install -g hexo-cli</span><br></pre></td></tr></table></figure>
<p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7gw1f70au858brj20i90ccgnt.jpg" alt="nvm 安装hexo"></p>
<p>使用命令检查，hexo安装情况</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo -v</span><br></pre></td></tr></table></figure>
<p>遇到问题：</p>
<p><img src="http://ww2.sinaimg.cn/large/7c2c6ab7gw1f70b216jdjj20i60cijsv.jpg" alt="hexo安装"></p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123; [Error: Cannot <span class="built_in">find</span> module './build/Release/DTraceProviderBindings'] code: 'MODULE_NOT_FOUND' &#125;    </span><br><span class="line">&#123; [Error: Cannot <span class="built_in">find</span> module './build/default/DTraceProviderBindings'] code: 'MODULE_NOT_FOUND' &#125;</span><br><span class="line">&#123; [Error: Cannot <span class="built_in">find</span> module './build/Debug/DTraceProviderBindings'] code: 'MODULE_NOT_FOUND' &#125;</span><br></pre></td></tr></table></figure>
<p>该问题官方说明（<a href="https://hexo.io/docs/troubleshooting.html#Error-with-DTrace-Mac-OS-X" target="_blank" rel="noopener">https://hexo.io/docs/troubleshooting.html#Error-with-DTrace-Mac-OS-X</a>）</p>
<p>然后查了以下hexo官方文档，最后用下面语句成功安装好hexo!</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo npm install -g hexo-cli</span><br></pre></td></tr></table></figure>
<p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7gw1f70dfasdi5j20i60ci75c.jpg" alt="hexo 安装"></p>
<h3 id="建站"><a href="#建站" class="headerlink" title="建站"></a>建站</h3><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init &lt;folder&gt;</span><br><span class="line">$ <span class="built_in">cd</span> &lt;folder&gt;</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure>
<h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>效果如下：<br><img src="http://ww2.sinaimg.cn/large/7c2c6ab7gw1f70e7q3jyfj20je0jeq54.jpg" alt="hexo 网站运行效果"></p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a href="http://www.jianshu.com/p/70974a67ec8f" target="_blank" rel="noopener">Mac os X 配置hexo教程</a> </li>
<li><a href="https://xuanwo.org/2015/03/26/hexo-intor/" target="_blank" rel="noopener">Hexo 博客搭建教程</a></li>
<li><a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">Hexo 官方安装说明</a></li>
<li><a href="https://nodejs.org/en/blog/community/node-v5/" target="_blank" rel="noopener">Hexo 版本分支说明</a></li>
<li><a href="http://www.runoob.com/nodejs/nodejs-install-setup.html" target="_blank" rel="noopener">Node.js安装配置</a></li>
<li><a href="https://git-scm.com/" target="_blank" rel="noopener">Git 工具使用</a></li>
<li><a href="https://git-scm.com/downloads/guis" target="_blank" rel="noopener">Git Client 工具使用</a></li>
<li><a href="http://brew.sh/" target="_blank" rel="noopener">Homebrew 官方</a></li>
<li><a href="https://zh.wikipedia.org/wiki/Homebrew" target="_blank" rel="noopener">Homebrew 维基百科</a></li>
</ul>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2016/08/19/Mac/Mac 命令－ 环境变量设置/">Mac OS 环境变量设置</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-08-19
        </span>
        
          <div class="post-category">
            
              <a href="/categories/Mac-应用/">Mac 应用</a>
            
          </div>
        
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        

        
          <h2 id="Mac-OS-环境变量设置"><a href="#Mac-OS-环境变量设置" class="headerlink" title="Mac OS 环境变量设置"></a>Mac OS 环境变量设置</h2><blockquote>
<p>环境变量（environment variables）</p>
</blockquote>
<p>一般是指在操作系统中用来指定操作系统运行环境的一些参数配置。</p>
<p>环境变量是在操作系统中一个具有特定名字的对象，它包含了一个或者多个应用程序所将使用到的信息。<br>例如:Windows和DOS操作系统中的path环境变量，当要求系统运行一个程序而没有告诉它程序所在的完整路径时，系统除了在当前目录下面寻找此程序外，还应到path中指定的路径去找。用户通过设置环境变量，来更好的运行进程。</p>
<h2 id="Mac-OS-环境配置方法"><a href="#Mac-OS-环境配置方法" class="headerlink" title="Mac OS 环境配置方法"></a>Mac OS 环境配置方法</h2><ol>
<li>打开Terminal（终端） </li>
</ol>
<p><img src="http://ww4.sinaimg.cn/large/7c2c6ab7gw1f5sfc40phvj20fu0a60sw.jpg" alt="图一：打开Terminal"></p>
<p>2.本文章使用Mac OS的内置<strong>nano编辑器</strong>进行对.bash_profile进行配置</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nano .bash_profile</span><br></pre></td></tr></table></figure>
<p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7gw1f5sg7suz98j20fu0a6aal.jpg" alt="使用nano编辑器修改.bash_profile文件"></p>
<blockquote>
<p>使用当前命令将会使用Mac OS 系统自带的nano编辑器打开.bash_profile(如果当前文件不存在则创建)</p>
</blockquote>
<p>运行效果如下：</p>
<p><img src="http://ww3.sinaimg.cn/large/7c2c6ab7gw1f5sg94fy9bj20fu0a63zi.jpg" alt="使用nano编辑器修改.bash_profile文件运行效果"></p>
<p>3.现在您可以很简单的加上一些配置到文件中，让后使您的终端(Terminal)使用起来更方便！^_^</p>
<p>4.需要使用source命令去激活更新</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source .bash_profile</span><br></pre></td></tr></table></figure>
<h2 id="实战"><a href="#实战" class="headerlink" title="实战"></a>实战</h2><h3 id="配置-bash-profile实战效果："><a href="#配置-bash-profile实战效果：" class="headerlink" title="配置.bash_profile实战效果："></a>配置.bash_profile实战效果：</h3><p>1.在nano编辑器上写入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export PS1=&quot;________________________________________________________________________________\n| \w @ \h (\u) \n| =&gt; &quot;</span><br><span class="line">export PS2=&quot;| =&gt; &quot;</span><br></pre></td></tr></table></figure>
<p><img src="http://ww2.sinaimg.cn/large/7c2c6ab7gw1f5sh2472h1j20fu0a60tx.jpg" alt="配置.bash_profile内容"></p>
<p>2.按ctr + x 保存文件</p>
<p>3.使用source命令激活更新</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source .bash_profile</span><br></pre></td></tr></table></figure>
<p>运行效果如下：</p>
<p><img src="http://ww2.sinaimg.cn/large/7c2c6ab7gw1f5sh454b1nj20fu0a6q3f.jpg" alt="修改.bash_profile文件运行效果"></p>
<p>更多关于.bash_profile的配置可以查看<strong>参考资料</strong> </p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a href="http://baike.baidu.com/view/95930.htm" target="_blank" rel="noopener">环境变量－百度百科</a> </li>
<li><a href="https://zh.wikipedia.org/wiki/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F" target="_blank" rel="noopener">环境变量－维基百科</a></li>
<li><a href="https://natelandau.com/my-mac-osx-bash_profile/" target="_blank" rel="noopener">MY MAC OSX BASH PROFILE</a></li>
<li><a href="https://www.douban.com/note/272498615/" target="_blank" rel="noopener">Mac nano 编辑器 配置</a></li>
<li><a href="http://stefaanlippens.net/bashrc_and_others" target="_blank" rel="noopener">Bash: about .bashrc, .bash_profile…</a></li>
<li><a href="https://www.phodal.com/blog/mac-os-bash-profile-configure-analytics/" target="_blank" rel="noopener">mac os .bash_profile 配置说明</a></li>
</ul>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2016/08/18/Tools/Github ssh 公钥使用/">Github ssh 公钥生成</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-08-18
        </span>
        
          <div class="post-category">
            
              <a href="/categories/开发工具/">开发工具</a>
            
          </div>
        
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        

        
          <h2 id="Github-ssh-公钥生成"><a href="#Github-ssh-公钥生成" class="headerlink" title="Github ssh 公钥生成"></a>Github ssh 公钥生成</h2><blockquote>
<p>SSH 为 Secure Shell 的缩写，由 IETF 的网络小组（Network Working Group）所制定；SSH 为建立在应用层和传输层基础上的安全协议。</p>
</blockquote>
<h3 id="使用Git生成ssh-公钥"><a href="#使用Git生成ssh-公钥" class="headerlink" title="使用Git生成ssh 公钥"></a>使用Git生成ssh 公钥</h3><p>1.安装Git<br>访问<a href="https://git-scm.com/" target="_blank" rel="noopener">Git官方</a> 下载最新的Git工具</p>
<p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7gw1f68f6juyf6j20ti0mwdpy.jpg" alt="下载最新的Git工具"></p>
<p>2.打开Git Bash</p>
<p><img src="http://ww4.sinaimg.cn/large/7c2c6ab7gw1f68f90q3mgj20gj094t98.jpg" alt="打开 Git Bash 工具"></p>
<p>使用命令定位到.ssh文件夹 </p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/.ssh</span><br></pre></td></tr></table></figure>
<p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7gw1f68fbk4jq1j20gj094wf6.jpg" alt="定位到 .ssh文件夹"></p>
<p>使用命令<strong>ssh-keygen</strong>生成公钥和私钥<br>因为我本机已经存在其他SSH的Key 所以这里执行ssh-keygen 命令时候我追加了-f 输出文件名定义 和-C注释描述。更多可以查看<a href="http://killer-jok.iteye.com/blog/1853451" target="_blank" rel="noopener">ssh-keygen参数说明</a></p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -f github-cotide -C cotide</span><br></pre></td></tr></table></figure>
<p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7gw1f68fr1clayj20gj094wgt.jpg" alt="执行ssh-keygen命令"></p>
<p>在该目录已经生成公钥和密码<br><img src="http://ww2.sinaimg.cn/large/7c2c6ab7gw1f68fsw17npj20ha06x0u3.jpg" alt="ssh-keygen 生成密钥目录"></p>
<p>可以复制.pub文件内容到Github -&gt; Settings -&gt; SSH and GPG keys </p>
<p>这样就完成Github的公钥配置</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a href="http://baike.baidu.com/subview/16184/5909252.htm" target="_blank" rel="noopener">SSH简介 - 百度百科</a> </li>
<li><a href="https://git-scm.com/book/zh/ch4-3.html" target="_blank" rel="noopener">Git Document - 生成 SSH 公钥</a>\</li>
<li><a href="https://wiki.archlinux.org/index.php/SSH_keys_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87" target="_blank" rel="noopener">Linux SSH</a>)</li>
<li><a href="http://killer-jok.iteye.com/blog/1853451" target="_blank" rel="noopener">ssh-keygen - 参数说明</a></li>
</ul>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2016/03/14/Mobile/PhoneGap 实战 – 初探/">PhoneGap 实战 – 初探</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-03-14
        </span>
        
          <div class="post-category">
            
              <a href="/categories/移动端框架/">移动端框架</a>
            
          </div>
        
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        

        
          <h2 id="HTML5-跨平台应用程式开发"><a href="#HTML5-跨平台应用程式开发" class="headerlink" title="HTML5 跨平台应用程式开发"></a>HTML5 跨平台应用程式开发</h2><p><img src="http://ww3.sinaimg.cn/large/7c2c6ab7gw1f1vqm7hvs6j20ee08tdg7.jpg" alt="图一：移动设备与PC市场份额"></p>
<p><img src="http://ww2.sinaimg.cn/large/7c2c6ab7jw1f1vqt5mgp1j20et095gm0.jpg" alt="图二：全球支持Html5设备占有率"></p>
<p><img src="http://ww4.sinaimg.cn/large/7c2c6ab7gw1f1vqucf4mnj20cg082wew.jpg" alt="图三:开发商对HTML的支持"></p>
<p><img src="http://ww4.sinaimg.cn/large/7c2c6ab7gw1f1vqv11lyyj20bu0ahwf3.jpg" alt="图四：HTML5兼容性"></p>
<blockquote>
<p><strong>移动手持设备</strong> （目前2014年）或者未来出货量将远超PC（图一）。在2016年，估计会有85％的手机配备的HTML5相容的浏览器（图2），资料显示，三分之二的行动应用程式开发商逐渐偏向使用HTML5作为开发平台。</p>
</blockquote>
<h2 id="PhoneGap简介"><a href="#PhoneGap简介" class="headerlink" title="PhoneGap简介"></a>PhoneGap简介</h2><p>PhoneGap 是基于HTML5的移动应用前端开发框架。使用HTML+CSS+JavaScript,再通过PhoneGap就可以快速创建移动App。<br>PhoneGet能让你只使用简单的Web技术即可获得移动设备的原生特性，如摄像头、加速器、指南针等。使用这些特性，再充份发挥你的想象力，就可以实现各种类型的、特别有意思的移动应用。<br>PhoneGap 是完全公开开放源代码的，您可以通过编写组件，实现任何原生设备特性的扩展。之后，还可以通过PhoneGap打包App,这样编写一次基础代码就可以将App部署到多个移动平台上。</p>
<h2 id="PhoneGap-环境搭建"><a href="#PhoneGap-环境搭建" class="headerlink" title="PhoneGap 环境搭建"></a>PhoneGap 环境搭建</h2><p>网址: <a href="http://phonegap.com/install/" target="_blank" rel="noopener">http://phonegap.com/install/</a></p>
<p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7jw1f1vr3gma32j20ih07v0t1.jpg" alt="图一：移动设备与PC市场份额"></p>
<p>【安装】</p>
<p>步骤1：安装NodeJS</p>
<p>步骤2：打开命令运行, 输入命令  npm install -g phonegap   </p>
<p>使用npm命令安装PhoneGap时候遇到问题排查：</p>
<p><img src="http://ww4.sinaimg.cn/large/7c2c6ab7jw1f1vr4niyprj20gb0argmt.jpg" alt="PhoneGap"></p>
<pre><code class="dos"><span class="function">C:\<span class="title">Users</span>\<span class="title">Administrator</span>&gt; <span class="title">npm</span> <span class="title">install</span> -<span class="title">g</span> <span class="title">phonegap</span></span>
<span class="function"><span class="title">npm</span> <span class="title">ERR</span>! <span class="title">not</span> <span class="title">found</span>: <span class="title">git</span></span>
<span class="function"><span class="title">npm</span> <span class="title">ERR</span>!</span>
<span class="function"><span class="title">npm</span> <span class="title">ERR</span>! <span class="title">Failed</span> <span class="title">using</span> <span class="title">git</span>.</span>
<span class="function"><span class="title">npm</span> <span class="title">ERR</span>! <span class="title">This</span> <span class="title">is</span> <span class="title">most</span> <span class="title">likely</span> <span class="title">not</span> <span class="title">a</span> <span class="title">problem</span> <span class="title">with</span> <span class="title">npm</span> <span class="title">itself</span>.</span>
<span class="function"><span class="title">npm</span> <span class="title">ERR</span>! <span class="title">Please</span> <span class="title">check</span> <span class="title">if</span> <span class="title">you</span> <span class="title">have</span> <span class="title">git</span> <span class="title">installed</span> <span class="title">and</span> <span class="title">in</span> <span class="title">your</span> <span class="title">PATH</span>.</span>
<span class="function"><span class="title">npm</span> <span class="title">ERR</span>! <span class="title">System</span> <span class="title">Windows_NT</span> 6.1.7601</span>
<span class="function"><span class="title">npm</span> <span class="title">ERR</span>! <span class="title">command</span> "<span class="title">D</span>:\\<span class="title">Program</span> <span class="title">Files</span>\\<span class="title">nodejs</span>\\\\<span class="title">node.exe</span>" "<span class="title">D</span>:\\<span class="title">Program</span> <span class="title">Files</span>\\<span class="title">nod</span></span>
<span class="function"><span class="title">ejs</span>\\<span class="title">node_modules</span>\\<span class="title">npm</span>\\<span class="title">bin</span>\\<span class="title">npm</span>-<span class="title">cli.js</span>" "<span class="title">install</span>" "-<span class="title">g</span>" "<span class="title">phonegap</span>"</span>
<span class="function"><span class="title">npm</span> <span class="title">ERR</span>! <span class="title">cwd</span> <span class="title">C</span>:\<span class="title">Users</span>\<span class="title">Administrator</span></span>
<span class="function"><span class="title">npm</span> <span class="title">ERR</span>! <span class="title">node</span> -<span class="title">v</span> <span class="title">v0</span>.10.29</span>
<span class="function"><span class="title">npm</span> <span class="title">ERR</span>! <span class="title">npm</span> -<span class="title">v</span> 1.4.14</span>
<span class="function"><span class="title">npm</span> <span class="title">ERR</span>! <span class="title">code</span> <span class="title">ENOGIT</span></span>
<span class="function"><span class="title">npm</span> <span class="title">ERR</span>!</span>
<span class="function"><span class="title">npm</span> <span class="title">ERR</span>! <span class="title">Additional</span> <span class="title">logging</span> <span class="title">details</span> <span class="title">can</span> <span class="title">be</span> <span class="title">found</span> <span class="title">in</span>:</span>
<span class="function"><span class="title">npm</span> <span class="title">ERR</span>!     <span class="title">C</span>:\<span class="title">Users</span>\<span class="title">Administrator</span>\<span class="title">npm</span>-<span class="title">debug.log</span></span>
<span class="function"><span class="title">npm</span> <span class="title">ERR</span>! <span class="title">not</span> <span class="title">ok</span> <span class="title">code</span> 0</span>
</code></pre>
<p>查看 npm-debug.log 日志文件片段说明</p>
<pre><code class="dos"><span class="number">370</span> error <span class="keyword">not</span> found: git
<span class="number">371</span> error Failed using git.
<span class="number">371</span> error This is most likely <span class="keyword">not</span> a problem with npm itself.
<span class="number">371</span> error Please check <span class="keyword">if</span> you have git installed and <span class="keyword">in</span> your <span class="built_in">PATH</span>.
<span class="number">372</span> error System Windows_NT <span class="number">6</span>.<span class="number">1</span>.<span class="number">7601</span>
<span class="number">373</span> error command "D:\\Program Files\\nodejs\\\\node.exe""D:\\Program Files\\nodejs\\node_modules\\npm\\b  <span class="keyword">in</span>\\npm-cli.js""install" "-g" "phonegap"
<span class="number">374</span> error cwd C:\Users\Administrator
<span class="number">375</span> error node -v v0.<span class="number">10</span>.<span class="number">29</span>
<span class="number">376</span> error npm -v <span class="number">1</span>.<span class="number">4</span>.<span class="number">14</span>
<span class="number">377</span> error code ENOGIT
</code></pre>
<p>NodeJs没办法识别到GIT的存在，检查GIT已经安装在本机。但还是出现“error notfound: git”。<br>最后发现GIT没有在环境变量中配置Path</p>
<p><img src="http://ww2.sinaimg.cn/large/7c2c6ab7gw1f1vr8g6ykaj20k40c8jtu.jpg" alt="PhoneGap"><br>Path配置路径为：</p>
<pre><code class="dos">Git安装文件路径\Git\bing
Git安装文件路径\Git\libexec\git-core
</code></pre>
<blockquote>
<p><strong>注意：</strong>多个Path配置用;分割<br>测试Git是否配置成功。</p>
</blockquote>
<p>打开CMD 输入 Git  </p>
<p><img src="http://ww3.sinaimg.cn/large/7c2c6ab7jw1f1vrcugwstj20gf0ftq5u.jpg" alt="PhoneGap"><br>继续使用 npm 命令 安装PhoneGap</p>
<p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7jw1f1vrd2examj20i90dp778.jpg" alt="PhoneGap"><br>现在Phonegap已经安装了.</p>
<h2 id="PhoneGap-在NodeJs实战"><a href="#PhoneGap-在NodeJs实战" class="headerlink" title="PhoneGap 在NodeJs实战"></a>PhoneGap 在NodeJs实战</h2><p>使用官方方式运行PhoneGap( <a href="http://phonegap.com/install/" target="_blank" rel="noopener">http://phonegap.com/install/</a>)</p>
<pre><code class="dos">$ phonegap create my-app
$ <span class="built_in">cd</span> my-app
$ phonegap run android
</code></pre>
<blockquote>
<p><strong>注意</strong>这里需要已经安装好Android-SDK 和 Java SDK 和已经配置到环境变量，因为这里ANT会调用它们。</p>
</blockquote>
<h3 id="1-使用phonegap-创建一个应用"><a href="#1-使用phonegap-创建一个应用" class="headerlink" title="1.使用phonegap 创建一个应用"></a>1.使用phonegap 创建一个应用</h3><p>打开CMD 使用命令  phonegap create[path]  path为项目位置，如果不输入默认为：C:\Users\Administrator下<br><img src="http://ww1.sinaimg.cn/large/7c2c6ab7jw1f1vrfc1j71j20ja0343z0.jpg" alt="PhoneGap"></p>
<h3 id="2-定位到应用的文件夹位置"><a href="#2-定位到应用的文件夹位置" class="headerlink" title="2.定位到应用的文件夹位置"></a>2.定位到应用的文件夹位置</h3><p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7jw1f1vrg30cvrj20fr00z746.jpg" alt="PhoneGap"></p>
<h3 id="3-使用phonegap-运行当前android应用"><a href="#3-使用phonegap-运行当前android应用" class="headerlink" title="3.使用phonegap 运行当前android应用"></a>3.使用phonegap 运行当前android应用</h3><p><img src="http://ww2.sinaimg.cn/large/7c2c6ab7jw1f1vrgpm13bj20g900t3ye.jpg" alt="PhoneGap"></p>
<p>在执行中遇到问题：<br><img src="http://ww3.sinaimg.cn/large/7c2c6ab7jw1f1vrhkmyx9j20id0bj76e.jpg" alt="PhoneGap"></p>
<pre><code>Error:ERROR : executing command &apos;ant&apos;, make sure you have ant installed and add edto your path.
</code></pre><p> 去Apache官方查询了一下ANT的资料（<a href="http://wiki.apache.org/ant/FrontPage" target="_blank" rel="noopener">http://wiki.apache.org/ant/FrontPage</a> ）</p>
<blockquote>
<p><strong>ApacheAnt</strong>是一个将软件编译、测试、部署等步骤联系在一起加以自动化的一个工具，大多用于Java环境中的软件开发。由Apache软件基 金会所提供。默认情况下，它的buildfile(XML文件)名为build.xml。每一个buildfile含有一个<project>和至少一个默认的<target>，这些targets包 含许多task elements。每一个task element有一个用来被参考的id，此id必须是唯一的。</target></project></p>
</blockquote>
<p>于是去apache官方下载ANT（<a href="http://ant.apache.org/" target="_blank" rel="noopener">http://ant.apache.org/</a> ）<br>关于ANT配置方法可以查看<a href="http://pan.baidu.com/s/1lJZUQ" target="_blank" rel="noopener">http://pan.baidu.com/s/1lJZUQ</a><br>配置完ANT后，重新开发CMD，定位到  my-app  项目文件路径，执行 phonegap run android  命令。<br>Phonegap调用了android 的AVD工具(安卓模拟器)，运行当前的APP效果如下：</p>
<p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7gw1f1vrjvr0xij20fl0cbmy0.jpg" alt="PhoneGap"><br>更多关于PhoneGap命令的使用可以使用CMD命令  PhoneGap Help  查看或者去它们官方网站了解。</p>
<h2 id="PhoneGap在Eclipse实战"><a href="#PhoneGap在Eclipse实战" class="headerlink" title="PhoneGap在Eclipse实战"></a>PhoneGap在Eclipse实战</h2><p>参考官方说明<br><a href="http://docs.phonegap.com/en/3.5.0/guide_platforms_android_index.md.html#Android%20Platform%20Guide" target="_blank" rel="noopener">http://docs.phonegap.com/en/3.5.0/guide_platforms_android_index.md.html#Android%20Platform%20Guide</a>)</p>
<p>1:使用Eclipse创建Android项目（参考：<a href="http://cotide.com/xcli/Blog/Article/75）" target="_blank" rel="noopener">http://cotide.com/xcli/Blog/Article/75）</a><br>2:安装 Cordova(<a href="http://cordova.apache.org/" target="_blank" rel="noopener">http://cordova.apache.org/</a>)</p>
<p><img src="http://ww3.sinaimg.cn/large/7c2c6ab7gw1f1vrosjij1j20hi07r75o.jpg" alt="PhoneGap"></p>
<p>3.使用NodeJS 安装  npm install –g cordova<br>4.使用Cordova命令创建PhoneGap项目</p>
<pre><code class="dos">$ cordova create hello com.example.hello "HelloWorld"
$ <span class="built_in">cd</span> hello
$ cordova platform add android
$ cordova build
</code></pre>
<p><img src="http://ww3.sinaimg.cn/large/7c2c6ab7gw1f1vrrm8mwqj20gd0aq407.jpg" alt="PhoneGap"></p>
<p><img src="http://ww3.sinaimg.cn/large/7c2c6ab7gw1f1vrru0e90j20g80aqjsj.jpg" alt="PhoneGap"></p>
<p>最后提示</p>
<p><img src="http://ww3.sinaimg.cn/large/7c2c6ab7gw1f1vrshuai1j20i30bygns.jpg" alt="PhoneGap"></p>
<p>5．打开Eclipse，选择File -&gt;New -&gt; Other -&gt;  Android projectsfrom existing code</p>
<p>选择生成的项目文件夹位置，导入项目。</p>
<ol start="6">
<li>运行项目</li>
</ol>
<p><img src="http://ww2.sinaimg.cn/large/7c2c6ab7jw1f1vrt025v0j209w0fq3yv.jpg" alt="PhoneGap"></p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a href="http://phonegap.com" target="_blank" rel="noopener">Phonegap官方 (http://phonegap.com) </a> </li>
<li><a href="https://github.com/phonegap/phonegap/wiki" target="_blank" rel="noopener">PhoneGap Wiki (https://github.com/phonegap/phonegap/wiki) </a> </li>
<li><a href="http://www.phonegapcn.com/docs/zh/1.4.1/" target="_blank" rel="noopener">PhoneGep Api Doc (http://www.phonegapcn.com/docs/zh/1.4.1/) </a> </li>
<li><a href="http://pan.baidu.com/s/1hqsZrpE" target="_blank" rel="noopener">PhoneGap实战(书) (http://pan.baidu.com/s/1hqsZrpE) </a> </li>
<li><a href="http://nodejs.org" target="_blank" rel="noopener">Node.js官方 (http://nodejs.org) </a> </li>
<li><a href="http://git-scm.com/" target="_blank" rel="noopener">Git (http://git-scm.com/) </a> </li>
<li><a href="http://cordova.apache.org/" target="_blank" rel="noopener">Cordova (http://cordova.apache.org/) </a>  </li>
</ul>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2016/02/14/Csharp/Dapper-扩展/">Dapper使用</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-02-14
        </span>
        
          <div class="post-category">
            
              <a href="/categories/Csharp/">Csharp</a>
            
          </div>
        
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        

        
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><blockquote>
<p> <strong>Dapper</strong>  -  是国外著名开发者社区Stackoverflow发布的一个轻量级,开源ORM组件。<br> 更多内容可以参考：   <a href="https://github.com/StackExchange/dapper-dot-net" target="_blank" rel="noopener">Dapper (https://github.com/StackExchange/dapper-dot-net) </a> </p>
</blockquote>
<h2 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h2><blockquote>
<p> <strong>DapperExtensions</strong> - 是基于Dapper扩展的类库，让使用者更简单，快捷，统一的使用Dapper。<br>更多内容可以参考：   <a href="https://github.com/tmsmith/Dapper-Extensions" target="_blank" rel="noopener">DapperExtensions (https://github.com/tmsmith/Dapper-Extensions) </a> </p>
</blockquote>
<h2 id="实战"><a href="#实战" class="headerlink" title="实战"></a>实战</h2><p>表结构如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#用户信息</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`UserInfo`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`UserInfo`</span> (</span><br><span class="line"> <span class="string">`ID`</span> <span class="built_in">VARCHAR</span>(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">"Id,主键"</span>,  </span><br><span class="line"> <span class="string">`No`</span> <span class="built_in">VARCHAR</span>(<span class="number">128</span>) <span class="keyword">COMMENT</span> <span class="string">"编号"</span>,</span><br><span class="line"> <span class="string">`UserName`</span> <span class="built_in">VARCHAR</span>(<span class="number">128</span>) <span class="keyword">COMMENT</span>  <span class="string">"用户名"</span>,</span><br><span class="line"> <span class="string">`NiceName`</span> <span class="built_in">VARCHAR</span>(<span class="number">128</span>) <span class="keyword">COMMENT</span> <span class="string">"昵称"</span>,</span><br><span class="line"> <span class="string">`Paw`</span> <span class="built_in">VARCHAR</span>(<span class="number">128</span>) <span class="keyword">COMMENT</span> <span class="string">"密码"</span>,  </span><br><span class="line"> <span class="string">`Status`</span> <span class="built_in">INT</span> <span class="keyword">COMMENT</span> <span class="string">"状态"</span>,</span><br><span class="line"> <span class="string">`CreateDateTime`</span> DATETIME <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">"创建时间"</span> ,</span><br><span class="line"> <span class="string">`LastUpdateDateTime`</span>  DATETIME   <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">"更新时间"</span>  </span><br><span class="line">)<span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span> = utf8 <span class="keyword">COMMENT</span> = <span class="string">"用户信息"</span>;</span><br></pre></td></tr></table></figure>
<p>查询 For SQL 参数 :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[TestMethod]</span><br><span class="line">public void QueryListForSQLTest()</span><br><span class="line">&#123;</span><br><span class="line">    using (IUnitOfWork unitOfWork = GetUnitOfWork())</span><br><span class="line">    &#123;</span><br><span class="line">        var commonRepo = unitOfWork.GetRepositoryForEntity&lt;UserInfo&gt;();</span><br><span class="line">        var dto = commonRepo.GetList(&quot;select * from userinfo where NiceName like @NiceName &quot;,</span><br><span class="line">            new</span><br><span class="line">            &#123;</span><br><span class="line">                NiceName =&quot;%小潮%&quot;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">        foreach (var item in dto)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(item.NiceName);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>查询 For 对象 属性 :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[TestMethod]</span><br><span class="line">public void QueryListTest()</span><br><span class="line">&#123;</span><br><span class="line">   using (IUnitOfWork unitOfWork = GetUnitOfWork())</span><br><span class="line">   &#123;</span><br><span class="line">       var commonRepo = unitOfWork.GetRepositoryForEntity&lt;UserInfo&gt;();</span><br><span class="line">       var predicate = Predicates.Field&lt;UserInfo&gt;(f =&gt; f.NiceName, Operator.Like, &quot;%小潮%&quot;);</span><br><span class="line">       var dto = commonRepo.GetList(predicate);</span><br><span class="line">       foreach (var item in dto)</span><br><span class="line">       &#123;</span><br><span class="line">           Console.WriteLine(item.NiceName);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>数据持久化 ：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[TestMethod]</span><br><span class="line">public void IUnitOfWorkTest()</span><br><span class="line">&#123;</span><br><span class="line">    using (IUnitOfWork unitOfWork = GetUnitOfWork())</span><br><span class="line">    &#123;</span><br><span class="line">        unitOfWork.BeginTransaction(); </span><br><span class="line">        var commonRepo = unitOfWork.GetRepositoryForEntity&lt;UserInfo&gt;();</span><br><span class="line">        commonRepo.Create(new UserInfo()</span><br><span class="line">        &#123; </span><br><span class="line">            NiceName = &quot;小潮1111111&quot;,</span><br><span class="line">            No = &quot;1231231321&quot;,</span><br><span class="line">            Paw = &quot;123456&quot;,</span><br><span class="line">            UserName = &quot;xiaochao&quot; </span><br><span class="line">        &#125;); </span><br><span class="line">        commonRepo.Create(new UserInfo()</span><br><span class="line">        &#123;</span><br><span class="line">            NiceName = &quot;小潮222222222&quot;, </span><br><span class="line">            Paw = &quot;123456&quot;,</span><br><span class="line">            UserName = &quot;xiaochao&quot;</span><br><span class="line">        &#125;); </span><br><span class="line">        unitOfWork.Commit();</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于DapperExtensions 可以自定义Mapper来映射数据库和实体的关系。</p>
<p>Mapper配置 ：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class UserInfo_Mapper : ClassMapper&lt;UserInfo&gt;</span><br><span class="line">&#123;</span><br><span class="line">   public UserInfo_Mapper()</span><br><span class="line">   &#123;</span><br><span class="line">        base.Table(&quot;UserInfo&quot;);</span><br><span class="line">        Map(f =&gt; f.Id);        </span><br><span class="line">        AutoMap();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用DapperExtension组件的 <strong><em>SetMappingAssemblies</em></strong> 方法，将一个或多个程序集包含Mapper配置规则适配到DapperExtension中： </p>
<pre><code>DapperExtensions.DapperExtensions.SetMappingAssemblies(new[] { typeof(CustomMapping&lt;&gt;).Assembly });

</code></pre><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><blockquote>
<p>最早接触轻量级ＯＲＭ是 <a href="https://github.com/CollaboratingPlatypus/PetaPoco" target="_blank" rel="noopener">petapoco (https://github.com/CollaboratingPlatypus/PetaPoco) </a> 两者很像，都是很棒的轻量级ＯＲＭ框架。</p>
</blockquote>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a href="https://github.com/StackExchange/dapper-dot-net" target="_blank" rel="noopener">Dapper (https://github.com/StackExchange/dapper-dot-net) </a> </li>
<li><a href="https://github.com/tmsmith/Dapper-Extensions" target="_blank" rel="noopener">DapperExtensions (https://github.com/tmsmith/Dapper-Extensions) </a> </li>
<li><a href="https://github.com/CollaboratingPlatypus/PetaPoco" target="_blank" rel="noopener">petapoco (https://github.com/CollaboratingPlatypus/PetaPoco) </a> </li>
</ul>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2012/12/10/Csharp/Elmah权限控制/">Elmah框架，添加日志文件访问权限</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2012-12-10
        </span>
        
          <div class="post-category">
            
              <a href="/categories/Csharp/">Csharp</a>
            
          </div>
        
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        

        
          <h2 id="Elmah-简述"><a href="#Elmah-简述" class="headerlink" title="Elmah 简述"></a>Elmah 简述</h2><p> <strong>ELMAH（The Error Logging Modules And Handlers）</strong>，直译过来就是“错误日志模块和处理”，它提供了一个用于集中记录和通知错误日志的机制。它是专用于ASP.NET的完全可热插拔的错误日志记录工具。其特点就是无需ASP.NET程序重新编译，即可通过配置web.config（或machine.config）来实现整个应用程序甚至是IIS中所有ASP.NET应用程序的错误日志记录工作。它支持日志的多种存储方式（各种数据库、XML、内存存储），除了提供一个界面用于查询日志详细信息外，还可以通过E-MAIL、RSS订阅或Twitter发布方式通知错误信息给相关人员。</p>
<p><img src="http://7nj0oy.com1.z0.glb.clouddn.com/hexo_blog_20121210233731_5479.jpg" alt="Elmah框架，添加日志文件访问权限"></p>
<h2 id="Elmah-配置"><a href="#Elmah-配置" class="headerlink" title="Elmah 配置"></a>Elmah 配置</h2><h3 id="web-config-代码块"><a href="#web-config-代码块" class="headerlink" title="web.config 代码块"></a><strong>web.config</strong> 代码块</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configSections</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Elmah日志记录插件 配置 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">sectionGroup</span> <span class="attr">name</span>=<span class="string">"elmah"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span> <span class="attr">name</span>=<span class="string">"security"</span> <span class="attr">type</span>=<span class="string">"Elmah.SecuritySectionHandler, Elmah"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span> <span class="attr">name</span>=<span class="string">"errorLog"</span> <span class="attr">type</span>=<span class="string">"Elmah.ErrorLogSectionHandler, Elmah"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;section name="errorMail" type="Elmah.ErrorMailSectionHandler, Elmah"/&gt; --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--  &lt;section name="errorFilter"  type="Elmah.ErrorFilterSectionHandler, Elmah"/&gt; --&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">sectionGroup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configSections</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Elmah日志记录插件 配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">elmah</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 是否允许远程访问。0代表否、1代表是 &lt;security allowRemoteAccess="1" /&gt; --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 错误邮件发送 配置  from: 用于发送的邮箱 to: 发送到的终端邮箱地址，多个用','分隔  subiect: 标题  async: 是否异步方式 smtpPort: SMTP端口 smtpServer:  SMTP服务地址 userName: 邮箱账号 password: 邮箱密码 noYsod: 邮件中是否包含附件 --&gt;</span> <span class="comment">&lt;!-- &lt;errorMail from="test@test.com"  to="huangyuan413026@163.com,364965519@qq.com"   subject="系统出错...."  async="true" smtpPort="25" smtpServer="mail.test.com" userName="test@test.com" password="*****" noYsod="true|false" /&gt; &lt;/elmah&gt; --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">errorLog</span> <span class="attr">type</span>=<span class="string">"Elmah.AccessErrorLog, Elmah"</span> <span class="attr">connectionString</span>=<span class="string">"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=|DataDirectory|Elmah.mdb"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">elmah</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="请求处理配置："><a href="#请求处理配置：" class="headerlink" title="请求处理配置："></a>请求处理配置：</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">httpModules</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">add</span> <span class="attr">name</span>=<span class="string">"ErrorLog"</span> <span class="attr">type</span>=<span class="string">"Elmah.ErrorLogModule, Elmah"</span>/&gt;</span> </span><br><span class="line"> <span class="tag">&lt;/<span class="name">httpModules</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">httpHandlers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">add</span> <span class="attr">verb</span>=<span class="string">"POST,GET,HEAD"</span> <span class="attr">path</span>=<span class="string">"webLog.axd"</span> <span class="attr">type</span>=<span class="string">"Elmah.ErrorLogPageFactory, Elmah"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">httpHandlers</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这个时候就能通过 <em>~/webLog.axd</em> 这个请求URL 来让Elmah框架处理，入口是<em>Elmah.ErrorLogPageFactory</em> !</p>
<p>这个时候因为Elmah没有做权限验证，只要访问 ~/webLog.axd 都能看到日志信息，所以这样很不安全。</p>
<p>解决方案1：在IIS配置URL访问权限，只有服务器本机的指定帐号才能访问该路径。</p>
<p>解决方案2：<br>在web.config配置URL权限访问限制：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">location</span> <span class="attr">path</span>=<span class="string">"webLog.axd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">system.web</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">authorization</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">deny</span> <span class="attr">users</span>=<span class="string">"?"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">authorization</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">system.web</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>拒绝所有匿名用户访问webLog.axd</p>
<p>在Global.asax文件里面Application_AuthenticateRequest （处理权限验证促发）事件</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">Application_AuthenticateRequest</span>(<span class="params"><span class="keyword">object</span> sender, EventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 判断是否已经登录</span></span><br><span class="line">    <span class="keyword">if</span> (Request.IsAuthenticated &amp;&amp; !Request.IsStaticFile())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// IOC注入:登录用户服务实例</span></span><br><span class="line">        <span class="keyword">var</span> identityService = ServiceLocator.Current.GetInstance&lt;IIdentityService&gt;(); </span><br><span class="line">        <span class="comment">// 分配当前上下文用户</span></span><br><span class="line">        Context.User = identityService.GetCurrentUser(); </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 处理日志权限问题</span></span><br><span class="line">    <span class="keyword">if</span> (Request.Url.ToString().Contains(<span class="string">"webLog.axd"</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 获取当前访问用户</span></span><br><span class="line">        <span class="keyword">var</span> user = Context.User <span class="keyword">as</span> UserPrincipal;</span><br><span class="line">        <span class="comment">// 业务逻辑，如果用户不为超级管理员则无法访问该请求数据 </span></span><br><span class="line">        <span class="keyword">if</span> (user == <span class="literal">null</span> || (user.UserRole &amp; UserRole.SuperAdmin) == <span class="number">0</span>)</span><br><span class="line">        &#123; </span><br><span class="line">           Response.Write(<span class="string">"无权限访问"</span>);</span><br><span class="line">           Response.End();</span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>完毕！！！ 这样只要访问webLog.axd 时候都会促发权限验证事件，这个时候就能进行访问的权限控制…</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a href="http://code.google.com/p/elmah/" target="_blank" rel="noopener">Elmah (http://code.google.com/p/elmah/) </a> </li>
</ul>

        
      
    </div>

    

    

  </article>

    
  </section>

  
  <nav class="pagination">
    
      <a class="prev" href="/page/3/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text">上一页</span>
      </a>
    
    
  </nav>


          </div>
          

        </div>
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:xli.code@gmail.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
        
          <a href="https://twitter.com/xiaochaoli" class="iconfont icon-twitter" title="twitter"></a>
        
      
    
      
    
      
    
      
    
      
        
          <a href="https://github.com/cotide" class="iconfont icon-github" title="github"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    
    
      
      <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    
  </div>


<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://hexo.io/">Hexo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2015 - 
    
    2018

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">cotide</span>
  </span>
</div>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    


    
  



  
  





  
    <script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  

  
    <script type="text/javascript" src="/lib/pjax/jquery.pjax.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/nprogress/nprogress.min.js"></script>
  


    <script type="text/javascript" src="/js/src/even.js?v=2.9.0"></script>

  </body>
</html>
