<!DOCTYPE html>
<html lang="">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="description" content="关于Jenkins的使用，和在windows平台下编译c#项目并发布"/>




  <meta name="keywords" content="Jenkins," />




  <link rel="alternate" href="/atom.xml" title="xcli’s Blog">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.4.x" />



<link rel="canonical" href="https://cotide.github.io/2017/05/28/Tools/Jenkins 使用/"/>


<meta name="description" content="关于Jenkins的使用，和在windows平台下编译c#项目并发布">
<meta property="og:type" content="article">
<meta property="og:title" content="Jenkins 使用">
<meta property="og:url" content="https://cotide.github.io/2017/05/28/Tools/Jenkins 使用/index.html">
<meta property="og:site_name" content="xcli’s Blog">
<meta property="og:description" content="关于Jenkins的使用，和在windows平台下编译c#项目并发布">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffmyny24h8j20p90ju0u4.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffmysefuq5j20p90ju3yv.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/7c2c6ab7ly1ffn8i0bhxzj20q80m6q55.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffo4jde3emj206o014jr5.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffo4n8r2ksj20sc0gf756.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffn6qjljrhj20q80m640n.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffoelpnbykj20sp0k0t9h.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffodlxup3gj20sv07zt8t.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffodmb7sb5j20sz0a3aan.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffocmaat16j20kx08zab1.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffocuy6r28j20qs0ecta9.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffocx63pwaj20qj0ff750.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffod2i9todj20qb0djgmg.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffodpgh30hj20pr0bnwez.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffpim3g5o3j20c909iglz.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffpo1cdg32j20bf0cu75k.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffpiql7n9sj20i00e4wfx.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffqh5ohvu4j20sx07u0sy.jpg">
<meta property="og:updated_time" content="2017-08-09T11:27:53.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Jenkins 使用">
<meta name="twitter:description" content="关于Jenkins的使用，和在windows平台下编译c#项目并发布">
<meta name="twitter:image" content="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffmyny24h8j20p90ju0u4.jpg">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.4.x" />







<script>
  var CONFIG = {
    search: false,
    searchPath: "/search.xml",
    fancybox: false,
    toc: true,
  }
</script>




  



    <title> Jenkins 使用 · xcli’s Blog </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">xcli’s Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            Home
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            Archives
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            Tags
          
        </li>
      </a>
    
      <a href="https://about.me/xcli">
        <li class="mobile-menu-item">
          
          
            About
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">xcli’s Blog</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              Home
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              Archives
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              Tags
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="https://about.me/xcli">
            
            
              About
            
          </a>
        </li>
      
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          Jenkins 使用
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          May 28, 2017
        </span>
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">Contents</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#简述"><span class="toc-text">简述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#引用项目"><span class="toc-text">引用项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用场景1"><span class="toc-text">使用场景1</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#GitLab-配置"><span class="toc-text">GitLab 配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#生成-SSH-公钥"><span class="toc-text">生成 SSH 公钥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Jenkins-配置"><span class="toc-text">Jenkins 配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#需要安装插件"><span class="toc-text">需要安装插件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#配置SSH"><span class="toc-text">配置SSH</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#配置Git-和-MSBuild"><span class="toc-text">配置Git 和 MSBuild</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#建立项目配置"><span class="toc-text">建立项目配置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用场景2"><span class="toc-text">使用场景2</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#需要插件"><span class="toc-text">需要插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置"><span class="toc-text">配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Maven-Home"><span class="toc-text">Maven Home</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考资料"><span class="toc-text">参考资料</span></a></li></ol>
    </div>
  </div>


    <div class="post-content">
      
        <h2 id="简述"><a href="#简述" class="headerlink" title="简述"></a>简述</h2><blockquote>
<p>Jenkins是一个用Java编写的开源的持续集成工具</p>
</blockquote>
<h2 id="引用项目"><a href="#引用项目" class="headerlink" title="引用项目"></a>引用项目</h2><ul>
<li>GitLab<blockquote>
<p>GitLab 是一个用于仓库管理系统的开源项目</p>
</blockquote>
</li>
</ul>
<ul>
<li>Jenkins<blockquote>
<p>Jenkins是一个开源软件持续集成项目 </p>
</blockquote>
</li>
</ul>
<ul>
<li>Jexus<blockquote>
<p>Jexus Web Server，简称JWS，是Linux平台上 的一款ASP.NET WEB服务器</p>
</blockquote>
</li>
</ul>
<h2 id="使用场景1"><a href="#使用场景1" class="headerlink" title="使用场景1"></a>使用场景1</h2><blockquote>
<p> GitLab (源代码管理) -&gt; 项目（ASP.NET） -&gt; Jenkins (持续集成 Window) -&gt; Jexus (Linux ASP.NET Web服务器)</p>
</blockquote>
<p>因为编译ASP.NET依赖Window编译工具，所以需要安装在Window系统,在Linux 只能编译.NET Core的项目</p>
<h3 id="GitLab-配置"><a href="#GitLab-配置" class="headerlink" title="GitLab 配置"></a>GitLab 配置</h3><blockquote>
<p>1.创建一个ASP.NET项目Pull到GitLab中</p>
</blockquote>
<p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffmyny24h8j20p90ju0u4.jpg" alt="GitLab"></p>
<p>本地运行效果：<br><img src="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffmysefuq5j20p90ju3yv.jpg" alt="ASP.NET Run"></p>
<blockquote>
<p>2.创建新用户用于自动化构建</p>
</blockquote>
<p>当前创建了用户名：==jenkins==</p>
<p>用于构建工作,然后分配项目权限<br>为了方便管理，我是建立一个群组给jenkins然后工程项目设置共享的群组,结果如下:</p>
<p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7ly1ffn8i0bhxzj20q80m6q55.jpg" alt="GitLab项目共享"></p>
<h3 id="生成-SSH-公钥"><a href="#生成-SSH-公钥" class="headerlink" title="生成 SSH 公钥"></a>生成 SSH 公钥</h3><p>打开 Git Bash 工具</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"># 生成公钥</div><div class="line">$ ssh-keygen -t rsa -C &quot;GitLab用户的邮箱&quot; -b 4096</div><div class="line"># 查看公钥</div><div class="line">$ cd ~/.ssh </div><div class="line">$ ls</div></pre></td></tr></table></figure>
<p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffo4jde3emj206o014jr5.jpg" alt="Git - 生成SSH 公钥"></p>
<p>文件说明：</p>
<ul>
<li>id_rsa - 私钥</li>
<li>id_rsa.pub - 公钥</li>
</ul>
<p>查看id_rsa.pub (公钥),添加到Gitlab的SSH密钥中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># 查看id_rsa.pub (公钥)</div><div class="line">$ cat id_rsa.pub</div></pre></td></tr></table></figure>
<p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffo4n8r2ksj20sc0gf756.jpg" alt="GitLab SSH密钥"></p>
<blockquote>
<p>可以使用 git clone 命令来检查是否能正确使用</p>
</blockquote>
<h3 id="Jenkins-配置"><a href="#Jenkins-配置" class="headerlink" title="Jenkins 配置"></a>Jenkins 配置</h3><p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffn6qjljrhj20q80m640n.jpg" alt="Jenkins 插件管理"></p>
<p>选择Jenkins -&gt; 系统管理 -&gt; 管理插件</p>
<h4 id="需要安装插件"><a href="#需要安装插件" class="headerlink" title="需要安装插件"></a>需要安装插件</h4><ul>
<li>Git plugin (从源代码管理GitLab下载代码)  </li>
<li>MSBuild Plugin (使用MSBuild编译ASP.NET项目)</li>
<li>Publish Over SSH (构建完成后使用SSH同步到Linux服务器)</li>
</ul>
<h5 id="配置SSH"><a href="#配置SSH" class="headerlink" title="配置SSH"></a>配置SSH</h5><p>点击【系统管理】-&gt; 【系统设置】配置 Publish over SSH</p>
<p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffoelpnbykj20sp0k0t9h.jpg" alt="Jenkins  使用"></p>
<h5 id="配置Git-和-MSBuild"><a href="#配置Git-和-MSBuild" class="headerlink" title="配置Git 和 MSBuild"></a>配置Git 和 MSBuild</h5><p>点击【系统管理】-&gt; 【Global Tool Configuration】配置 SSH remote hosts 配置<br> 配置 Git 和 MSBuild 信息</p>
<p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffodlxup3gj20sv07zt8t.jpg" alt="Jenkins 使用"></p>
<p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffodmb7sb5j20sz0a3aan.jpg" alt="Jenkins 使用"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"># 重启Jenkins (Window系统)</div><div class="line">$ net stop jenkins</div><div class="line">$ net start jenkins </div><div class="line"></div><div class="line"># 重启Jenkins (Linux系统)</div><div class="line">$ sudo service jenkins restart</div></pre></td></tr></table></figure>
<p>或者点击读取设置重置</p>
<p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffocmaat16j20kx08zab1.jpg" alt="Jenkins  使用"></p>
<h4 id="建立项目配置"><a href="#建立项目配置" class="headerlink" title="建立项目配置"></a>建立项目配置</h4><blockquote>
<ol>
<li>新建配置</li>
</ol>
</blockquote>
<p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffocuy6r28j20qs0ecta9.jpg" alt="Jenkins 使用"></p>
<blockquote>
<ol>
<li>源代码管理配置</li>
</ol>
</blockquote>
<p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffocx63pwaj20qj0ff750.jpg" alt="Jenkins 使用"></p>
<p>添加GitLab代码仓位置地址,并配置鉴权方式，我是使用“SSH Username with private key”方式，将之前生成的私钥(id_rsa)和用户名分别填进去就可以了</p>
<blockquote>
<p>3.构建触发器</p>
</blockquote>
<p>按需选择促发事件</p>
<p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffod2i9todj20qb0djgmg.jpg" alt="Jenkins 使用"></p>
<blockquote>
<p>4.构建配置</p>
</blockquote>
<p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffodpgh30hj20pr0bnwez.jpg" alt="Jenkins  使用"></p>
<p>使用配置好的MSBuild进行编译,更多命令参数可以查看 -&gt; <a href="https://msdn.microsoft.com/en-us/library/ms164311.aspx" target="_blank" rel="external">MSBuild官方参数说明</a></p>
<p>编译完后可以接入脚本做后期发布操作，所以可以加上执行“Execute Windwos batch command”</p>
<p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffpim3g5o3j20c909iglz.jpg" alt="Jenkins  使用"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">@echo off</div><div class="line">echo &apos;**************************** 开始进行打包文件压缩 ****************************&apos;</div><div class="line">echo 当前目录:%cd%</div><div class="line">:当前项目目录</div><div class="line">set Root=%cd%</div><div class="line">:打包输出目录</div><div class="line">set OutputDIR=%Root%\build\</div><div class="line">:打包输出全路径</div><div class="line">set OutputFullPath=%OutputDIR%Web.zip</div><div class="line">:需要压缩目录</div><div class="line">set ProjectZipPath=%Root%\Project\Web\</div><div class="line"> </div><div class="line">echo 信息如下： </div><div class="line">echo 输出目录:%OutputDIR%</div><div class="line">echo 打包输出全路径: %OutputFullPath%</div><div class="line">echo 需要压缩目录: %ProjectZipPath%</div><div class="line"></div><div class="line"></div><div class="line">:判断文件是否存在，没有则删除</div><div class="line">if not exist &quot;%OutputDIR%&quot; (</div><div class="line">  mkdir &quot;%OutputDIR%&quot; </div><div class="line">)else  echo &quot;项目输出目录已存在&quot;</div><div class="line"></div><div class="line">:定位项目目录</div><div class="line">cd &quot;%ProjectZipPath%&quot;</div><div class="line"></div><div class="line">:压缩</div><div class="line">rar a -r &quot;%OutputFullPath%&quot;</div><div class="line"></div><div class="line">echo 压缩成功！输出文件位置: &quot;%OutputFullPath%&quot;</div><div class="line"></div><div class="line"></div><div class="line">echo &apos;**************************** 开始进行打包文件压缩 ****************************&apos;</div><div class="line"></div><div class="line">:移动压缩文件</div><div class="line">move &quot;%OutputFullPath%&quot;  F:\www\Test </div><div class="line">cd F:\www\Test\</div><div class="line">rar x Web.zip -y</div><div class="line">del F:\www\Test\Web.zip</div><div class="line"></div><div class="line">echo 部署成功！部署文件位置: F:\www\Test\Web.zip</div></pre></td></tr></table></figure>
<blockquote>
<p>注意这里用到rar命令，该程序一般在C:\Program Files\WinRAR\目录下，为了方便调用我将它加到环境变量里面,这样才能直接调用rar命令</p>
</blockquote>
<p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffpo1cdg32j20bf0cu75k.jpg" alt="Jenkins  使用"></p>
<blockquote>
<p>5.执行效果</p>
</blockquote>
<p>输出结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div></pre></td><td class="code"><pre><div class="line">Started by user root</div><div class="line">Building in workspace F:\Program Files (x86)\Jenkins\workspace\NetDemo - Build</div><div class="line"> &gt; F:\Program Files\Git\bin\git.exe rev-parse --is-inside-work-tree # timeout=10</div><div class="line">Fetching changes from the remote Git repository</div><div class="line"> &gt; F:\Program Files\Git\bin\git.exe config remote.origin.url git@192.168.124.128:HuiMei/NetDemo.git # timeout=10</div><div class="line">Fetching upstream changes from git@192.168.124.128:HuiMei/NetDemo.git</div><div class="line"> &gt; F:\Program Files\Git\bin\git.exe --version # timeout=10</div><div class="line">using GIT_SSH to set credentials </div><div class="line"> &gt; F:\Program Files\Git\bin\git.exe fetch --tags --progress git@192.168.124.128:HuiMei/NetDemo.git +refs/heads/*:refs/remotes/origin/*</div><div class="line"> &gt; F:\Program Files\Git\bin\git.exe rev-parse &quot;refs/remotes/origin/master^&#123;commit&#125;&quot; # timeout=10</div><div class="line"> &gt; F:\Program Files\Git\bin\git.exe rev-parse &quot;refs/remotes/origin/origin/master^&#123;commit&#125;&quot; # timeout=10</div><div class="line">Checking out Revision 98a5f45299f8a1c189e88cbdcee0d1eca767017b (refs/remotes/origin/master)</div><div class="line"> &gt; F:\Program Files\Git\bin\git.exe config core.sparsecheckout # timeout=10</div><div class="line"> &gt; F:\Program Files\Git\bin\git.exe checkout -f 98a5f45299f8a1c189e88cbdcee0d1eca767017b</div><div class="line"> &gt; F:\Program Files\Git\bin\git.exe rev-list 98a5f45299f8a1c189e88cbdcee0d1eca767017b # timeout=10</div><div class="line">Path To MSBuild.exe: C:\Program Files (x86)\MSBuild\14.0\Bin\MSBuild.exe</div><div class="line">Executing the command cmd.exe /C &quot; &quot;C:\Program Files (x86)\MSBuild\14.0\Bin\MSBuild.exe&quot; /t:Rebuild /p:Configuration=Release;Platform=AnyCPU Project/Web/Web.csproj &quot; &amp;&amp; exit %%ERRORLEVEL%% from F:\Program Files (x86)\Jenkins\workspace\NetDemo - Build</div><div class="line">[NetDemo - Build] $ cmd.exe /C &quot; &quot;C:\Program Files (x86)\MSBuild\14.0\Bin\MSBuild.exe&quot; /t:Rebuild /p:Configuration=Release;Platform=AnyCPU Project/Web/Web.csproj &quot; &amp;&amp; exit %%ERRORLEVEL%%</div><div class="line">Microsoft (R) 生成引擎版本 14.0.24720.0</div><div class="line">版权所有(C) Microsoft Corporation。保留所有权利。</div><div class="line"></div><div class="line">生成启动时间为 2017/5/18 14:51:15。</div><div class="line">项目中不存在 BeforeTargets 特性中的“C:\Program Files (x86)\MSBuild\Microsoft\NuGet\Microsoft.NuGet.targets (186,61)”位置列出的目标“BeforeGenerateProjectPriFile”，将忽略该目标。</div><div class="line">项目中不存在 BeforeTargets 特性中的“C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v14.0\Web\Microsoft.Web.Publishing.targets (843,131)”位置列出的目标“MvcBuildViews”，将忽略该目标。</div><div class="line">项目“F:\Program Files (x86)\Jenkins\workspace\NetDemo - Build\Project\Web\Web.csproj”在节点 1 上(Rebuild 个目标)。</div><div class="line">CoreClean:</div><div class="line">  正在删除文件“F:\Program Files (x86)\Jenkins\workspace\NetDemo - Build\Project\Web\bin\Web.dll.config”。</div><div class="line">  正在删除文件“F:\Program Files (x86)\Jenkins\workspace\NetDemo - Build\Project\Web\bin\Web.dll”。</div><div class="line">  正在删除文件“F:\Program Files (x86)\Jenkins\workspace\NetDemo - Build\Project\Web\bin\Web.pdb”。</div><div class="line">  正在删除文件“F:\Program Files (x86)\Jenkins\workspace\NetDemo - Build\Project\Web\obj\Release\Web.csprojResolveAssemblyReference.cache”。</div><div class="line">  正在删除文件“F:\Program Files (x86)\Jenkins\workspace\NetDemo - Build\Project\Web\obj\Release\Web.dll”。</div><div class="line">  正在删除文件“F:\Program Files (x86)\Jenkins\workspace\NetDemo - Build\Project\Web\obj\Release\Web.pdb”。</div><div class="line">GenerateTargetFrameworkMonikerAttribute:</div><div class="line">正在跳过目标“GenerateTargetFrameworkMonikerAttribute”，因为所有输出文件相对于输入文件而言都是最新的。</div><div class="line">CoreCompile:</div><div class="line">  C:\Program Files (x86)\MSBuild\14.0\bin\csc.exe /noconfig /nowarn:1701,1702 /nostdlib+ /errorreport:prompt /warn:4 /define:TRACE /highentropyva- /reference:&quot;C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Microsoft.CSharp.dll&quot; /reference:&quot;C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\mscorlib.dll&quot; /reference:&quot;C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.ComponentModel.DataAnnotations.dll&quot; /reference:&quot;C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Configuration.dll&quot; /reference:&quot;C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Core.dll&quot; /reference:&quot;C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Data.DataSetExtensions.dll&quot; /reference:&quot;C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Data.dll&quot; /reference:&quot;C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.dll&quot; /reference:&quot;C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Drawing.dll&quot; /reference:&quot;C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.EnterpriseServices.dll&quot; /reference:&quot;C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Web.ApplicationServices.dll&quot; /reference:&quot;C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Web.dll&quot; /reference:&quot;C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Web.DynamicData.dll&quot; /reference:&quot;C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Web.Entity.dll&quot; /reference:&quot;C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Web.Extensions.dll&quot; /reference:&quot;C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Web.Services.dll&quot; /reference:&quot;C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Xml.dll&quot; /reference:&quot;C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Xml.Linq.dll&quot; /debug:pdbonly /optimize+ /out:obj\Release\Web.dll /ruleset:&quot;E:\Program Files\Team Tools\Static Analysis Tools\\Rule Sets\MinimumRecommendedRules.ruleset&quot; /target:library /utf8output Index.aspx.cs Index.aspx.designer.cs Properties\AssemblyInfo.cs &quot;C:\Windows\TEMP\.NETFramework,Version=v4.0.AssemblyAttributes.cs&quot;</div><div class="line">_CopyAppConfigFile:</div><div class="line">  正在将文件从“Web.config”复制到“bin\Web.dll.config”。</div><div class="line">CopyFilesToOutputDirectory:</div><div class="line">  正在将文件从“obj\Release\Web.dll”复制到“bin\Web.dll”。</div><div class="line">  Web -&gt; F:\Program Files (x86)\Jenkins\workspace\NetDemo - Build\Project\Web\bin\Web.dll</div><div class="line">  正在将文件从“obj\Release\Web.pdb”复制到“bin\Web.pdb”。</div><div class="line">已完成生成项目“F:\Program Files (x86)\Jenkins\workspace\NetDemo - Build\Project\Web\Web.csproj”(Rebuild 个目标)的操作。</div><div class="line"></div><div class="line">已成功生成。</div><div class="line">    0 个警告</div><div class="line">    0 个错误</div><div class="line"></div><div class="line">已用时间 00:00:00.20</div><div class="line">[NetDemo - Build] $ cmd /c call C:\Windows\TEMP\hudson5880815456699306038.bat</div><div class="line">&apos;**************************** 开始进行打包文件压缩 ****************************&apos;</div><div class="line">当前目录:F:\Program Files (x86)\Jenkins\workspace\NetDemo - Build</div><div class="line">信息如下： </div><div class="line">输出目录:F:\Program Files (x86)\Jenkins\workspace\NetDemo - Build\build\</div><div class="line">打包输出全路径: F:\Program Files (x86)\Jenkins\workspace\NetDemo - Build\build\Web.zip</div><div class="line">需要压缩目录: F:\Program Files (x86)\Jenkins\workspace\NetDemo - Build\Project\Web\</div><div class="line">&quot;项目输出目录已存在&quot;</div><div class="line"></div><div class="line">RAR 5.01   版权所有 (c) 1993-2013 Alexander Roshal   1 十二月 2013</div><div class="line">已注册给 State Grid Corporation Of China</div><div class="line"></div><div class="line">正在创建 压缩包 F:\Program Files (x86)\Jenkins\workspace\NetDemo - Build\build\Web.zip</div><div class="line"></div><div class="line">正在添加  AssemblyInfo.cs                                                  1%  OK </div><div class="line">正在添加  bin\Web.dll                                                      8%  OK </div><div class="line">正在添加  bin\Web.dll.config                                               8%  OK </div><div class="line">正在添加  bin\Web.pdb                                                     25%  OK </div><div class="line">正在添加  Index.aspx                                                      25%  OK </div><div class="line">正在添加  Index.aspx.cs                                                   26%  OK </div><div class="line">正在添加  Index.aspx.designer.cs                                          27%  OK </div><div class="line">正在添加  obj\Release\Web.csproj.FileListAbsolute.txt                     28%  OK </div><div class="line">正在添加  obj\Release\Web.csprojResolveAssemblyReference.cache            32%  OK </div><div class="line">正在添加  obj\Release\Web.dll                                             39%  OK </div><div class="line">正在添加  obj\Release\Web.pdb                                             56%  OK </div><div class="line">正在添加  Properties\AssemblyInfo.cs                                      57%  OK </div><div class="line">正在添加  Web.config                                                      58%  OK </div><div class="line">正在添加  Web.csproj                                                      65%  OK </div><div class="line">正在添加  Web.csproj.FileListAbsolute.txt                                 66%  OK </div><div class="line">正在添加  Web.csproj.user                                                 68%  OK </div><div class="line">正在添加  Web.csprojResolveAssemblyReference.cache                        72%  OK </div><div class="line">正在添加  Web.Debug.config                                                74%  OK </div><div class="line">正在添加  Web.dll                                                         81%  OK </div><div class="line">正在添加  Web.dll.config                                                  81%  OK </div><div class="line">正在添加  Web.pdb                                                         98%  OK </div><div class="line">正在添加  Web.Release.config                                             100%  OK </div><div class="line">正在添加  obj\Release                                                      OK </div><div class="line">正在添加  bin                                                              OK </div><div class="line">正在添加  obj                                                              OK </div><div class="line">正在添加  Properties                                                       OK </div><div class="line">完成</div><div class="line">压缩成功！输出文件位置: &quot;F:\Program Files (x86)\Jenkins\workspace\NetDemo - Build\build\Web.zip&quot;</div><div class="line">&apos;**************************** 开始进行打包文件压缩 ****************************&apos;</div><div class="line">移动了         1 个文件。</div><div class="line"></div><div class="line">RAR 5.01   版权所有 (c) 1993-2013 Alexander Roshal   1 十二月 2013</div><div class="line">已注册给 State Grid Corporation Of China</div><div class="line"></div><div class="line"></div><div class="line">正在从 Web.zip 解压缩</div><div class="line"></div><div class="line">正在解压缩  AssemblyInfo.cs                                                4%  OK </div><div class="line">正在解压缩  bin\Web.dll                                                   13%  OK </div><div class="line">正在解压缩  bin\Web.dll.config                                            15%  OK </div><div class="line">正在解压缩  bin\Web.pdb                                                   21%  OK </div><div class="line">正在解压缩  Index.aspx                                                    23%  OK </div><div class="line">正在解压缩  Index.aspx.cs                                                 24%  OK </div><div class="line">正在解压缩  Index.aspx.designer.cs                                        27%  OK </div><div class="line">正在解压缩  obj\Release\Web.csproj.FileListAbsolute.txt                   28%  OK </div><div class="line">正在解压缩  obj\Release\Web.csprojResolveAssemblyReference.cache          33%  OK </div><div class="line">正在解压缩  obj\Release\Web.dll                                           42%  OK </div><div class="line">正在解压缩  obj\Release\Web.pdb                                           48%  OK </div><div class="line">正在解压缩  Properties\AssemblyInfo.cs                                    52%  OK </div><div class="line">正在解压缩  Web.config                                                    54%  OK </div><div class="line">正在解压缩  Web.csproj                                                    63%  OK </div><div class="line">正在解压缩  Web.csproj.FileListAbsolute.txt                               65%  OK </div><div class="line">正在解压缩  Web.csproj.user                                               68%  OK </div><div class="line">正在解压缩  Web.csprojResolveAssemblyReference.cache                      72%  OK </div><div class="line">正在解压缩  Web.Debug.config                                              77%  OK </div><div class="line">正在解压缩  Web.dll                                                       86%  OK </div><div class="line">正在解压缩  Web.dll.config                                                88%  OK </div><div class="line">正在解压缩  Web.pdb                                                       94%  OK </div><div class="line">正在解压缩  Web.Release.config                                            98%  OK </div><div class="line">全部OK</div><div class="line">部署成功！部署文件位置: F:\www\Test\Web.zip </div><div class="line">Finished: SUCCESS</div></pre></td></tr></table></figure></p>
<p>文件已经部署到F:\www\Test\中</p>
<p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffpiql7n9sj20i00e4wfx.jpg" alt="Jenkins  使用"></p>
<h2 id="使用场景2"><a href="#使用场景2" class="headerlink" title="使用场景2"></a>使用场景2</h2><blockquote>
<p> GitLab (源代码管理) -&gt; 项目（Java） -&gt; Jenkins (持续集成 CentOS) -&gt; Tomcat (Web服务器)</p>
</blockquote>
<h3 id="需要插件"><a href="#需要插件" class="headerlink" title="需要插件"></a>需要插件</h3><ul>
<li>Maven Integration plugin</li>
</ul>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><h4 id="Maven-Home"><a href="#Maven-Home" class="headerlink" title="Maven Home"></a>Maven Home</h4><p><img src="http://ww1.sinaimg.cn/large/7c2c6ab7gy1ffqh5ohvu4j20sx07u0sy.jpg" alt="Jenkins  使用"></p>
<blockquote>
<p>点击【系统管理】-&gt; 【Global Tool Configuration】 配置Maven信息</p>
</blockquote>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a href="http://lachlanbarclay.net/2016/08/automated-build-with-gitlab-and-jenkins" target="_blank" rel="external">Automated build with Gitlab and Jenkins</a></li>
<li><a href="https://docs.gitlab.com/ee/integration/jenkins.html" target="_blank" rel="external">Jenkins CI integration</a></li>
<li><a href="http://skyseraph.com/2016/07/18/Tools/Jenkins%20Gitlab%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%E6%89%93%E5%8C%85%E5%B9%B3%E5%8F%B0%E6%90%AD%E5%BB%BA/" target="_blank" rel="external">Jenkins Gitlab持续集成打包平台搭建</a></li>
<li><a href="http://cron.qqe2.com/" target="_blank" rel="external">Cron在线生成</a></li>
<li><a href="http://www.cnblogs.com/xishuai/p/gitlab-ci.html" target="_blank" rel="external">Gitlab 部署 CI 持续集成</a></li>
<li><a href="https://msdn.microsoft.com/en-us/library/ms164311.aspx" target="_blank" rel="external">MSBuild 参数说明</a></li>
<li><a href="http://www.cnblogs.com/helloIT/p/5009553.html" target="_blank" rel="external">Jenkins Window的管理</a></li>
<li><a href="http://www.cnblogs.com/yangxia-test/p/4372097.html" target="_blank" rel="external">Jenkins插件之构建MSBuild编译问题</a></li>
<li><a href="http://blog.bekijkhet.com/2013/01/create-mono-c-buildserver-using-jenkins.html" target="_blank" rel="external">Create a Mono C# Buildserver using Jenkins and GitHub</a></li>
<li><a href="http://www.mono-project.com" target="_blank" rel="external">Mono - 官方</a></li>
<li><a href="https://git-scm.com/book/zh/v1/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84-Git-%E7%94%9F%E6%88%90-SSH-%E5%85%AC%E9%92%A5" target="_blank" rel="external">服务器上的 Git - 生成 SSH 公钥</a></li>
<li><a href="http://blog.bekijkhet.com/2013/01/create-mono-c-buildserver-using-jenkins.html" target="_blank" rel="external">Create a Mono C# Buildserver using Jenkins and GitHub</a></li>
<li><a href="http://stackoverflow.com/questions/10227967/build-net-application-in-jenkins-using-msbuild" target="_blank" rel="external">build .net application in Jenkins using MSBuild</a></li>
<li><a href="https://wiki.jenkins-ci.org/display/JENKINS/SSH+plugin" target="_blank" rel="external">SSH plugin</a></li>
<li><a href="https://blog.coderstory.cn/2016/12/28/jenkins%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B%E4%B9%8B%E7%BC%96%E8%AF%91%E5%90%8E%E4%BD%BF%E7%94%A8ssh%E5%8F%91%E5%B8%83/" target="_blank" rel="external">Jenkins系列教程之编译后使用SSH发布</a></li>
<li><a href="https://wiki.jenkins-ci.org/display/JENKINS/Publish+Over+SSH+Plugin" target="_blank" rel="external">Publish Over SSH Plugin</a></li>
<li><a href="https://yq.aliyun.com/articles/33034" target="_blank" rel="external">Jenkins+Git 集成测试（build、zip、curl）</a> </li>
<li><a href="http://www.cnblogs.com/fetty/p/4769279.html" target="_blank" rel="external">WinRAR的命令行模式用法介绍</a></li>
<li><a href="http://www.cnblogs.com/kekec/p/3937530.html" target="_blank" rel="external">windows批处理语法</a></li>
<li><a href="https://www.cygwin.com" target="_blank" rel="external">Cygwin</a></li>
<li><a href="https://www.ibm.com/developerworks/cn/aix/library/1006_lisali_sshlogon/" target="_blank" rel="external">通过 SSH 密钥验证实现在不同系统之间的脚本自动化</a></li>
<li><a href="https://docs.gitlab.com/ce/user/project/integrations/webhooks.html" target="_blank" rel="external">WebHook 官方说明</a></li>
<li><a href="https://git-scm.com/book/zh/v2/%E8%87%AA%E5%AE%9A%E4%B9%89-Git-Git-%E9%92%A9%E5%AD%90" target="_blank" rel="external">Git-钩子</a></li>
<li><a href="https://sebastianblade.com/use-jenkins-to-auto-build-maven-project-in-git/" target="_blank" rel="external">用 Jenkins 自动化构建 Git 中 Maven 项目</a></li>
<li><a href="https://github.com/qinjx/30min_guides/blob/master/shell.md" target="_blank" rel="external">Shell脚本编程30分钟入门</a></li>
</ul>

      
    </div>

    
      
      

  <div class="post-copyright">
    <p class="copyright-item">
      <span>作者: </span>
      <span>xcli’s Blog</span>
    </p>
    <p class="copyright-item">
      <span>来源: </span>
      <a href="https://cotide.github.io">https://cotide.github.io</a>
    </p>
    <p class="copyright-item">
      <span>链接: </span>
      <a href="https://cotide.github.io/2017/05/28/Tools/Jenkins 使用/">https://cotide.github.io/2017/05/28/Tools/Jenkins 使用/</a>
    </p>

    <p class="copyright-item lincese">
      
      本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
    </p>
  </div>



      
      
  <div class="post-reward">
    <input type="checkbox" name="reward" id="reward" hidden />
    <label class="reward-button" for="reward">赞赏支持</label>
    <div class="qr-code">
      
      
        <label class="qr-code-image" for="reward">
          <img class="image" src="/image/reward/wechat.png" title="wechat">
        </label>
      
      
        <label class="qr-code-image" for="reward">
          <img class="image" src="/image/reward/alipay.png" title="alipay">
        </label>
      
    </div>
  </div>

    

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/Jenkins/">Jenkins</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2017/07/28/Shadowsocks/CentOS7 安装Shadowsocks/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">CentOS7 安装Shadowsocks</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/2017/05/24/Tools/Jenkins 安装/">
        <span class="next-text nav-default">Jenkins 安装</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>  
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    
    
  </div>


<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a>
  </span>
  
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2012 - 
    
    2017

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">xcli’s Blog</span>
  </span>
</div>
      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  

  
  <script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'https://cotide.github.io/2017/05/28/Tools/Jenkins 使用/';
        this.page.identifier = '2017/05/28/Tools/Jenkins 使用/';
        this.page.title = 'Jenkins 使用';
    };
    (function() {
    var d = document, s = d.createElement('script');

    s.src = '//xclis-blog.disqus.com/embed.js';

    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();  
  </script>

  




    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  


    <script type="text/javascript" src="/js/src/even.js?v=2.4.x"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.4.x"></script>

    
  </body>
</html>
